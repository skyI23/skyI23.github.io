<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="sky123">
    
    <!-- Completely eliminate flash of wrong theme -->
    <script>
        (function() {
            const THEME_KEY = "REDEFINE-THEME-STATUS";
            const DARK = "dark", LIGHT = "light";
            
            // Get preferred theme
            function getTheme() {
                try {
                    const saved = localStorage.getItem(THEME_KEY);
                    if (saved) {
                        const { isDark } = JSON.parse(saved);
                        return isDark ? DARK : LIGHT;
                    }
                } catch (e) {}
                
                return matchMedia("(prefers-color-scheme: dark)").matches ? DARK : LIGHT;
            }
            
            // Apply theme to document
            function applyTheme(theme) {
                const isDark = theme === DARK;
                const root = document.documentElement;
                
                // Set data attribute for CSS variables
                root.setAttribute("data-theme", theme);
                
                // Set classes for compatibility
                root.classList.add(theme);
                root.classList.remove(isDark ? LIGHT : DARK);
                root.style.colorScheme = theme;
            }
            
            // Initial application
            const theme = getTheme();
            applyTheme(theme);
            
            // Listen for system preference changes
            matchMedia("(prefers-color-scheme: dark)").addEventListener("change", ({ matches }) => {
                // Only update if using system preference (no localStorage entry)
                if (!localStorage.getItem(THEME_KEY)) {
                    applyTheme(matches ? DARK : LIGHT);
                }
            });
            
            // Set body classes once DOM is ready
            if (document.readyState !== "loading") {
                document.body.classList.add(theme + "-mode");
            } else {
                document.addEventListener("DOMContentLoaded", () => {
                    document.body.classList.add(theme + "-mode");
                    document.body.classList.remove((theme === DARK ? LIGHT : DARK) + "-mode");
                });
            }
        })();
    </script>
    
    <!-- Critical CSS to prevent flash -->
    <style>
        :root[data-theme="dark"] {
            --background-color: #202124;
            --background-color-transparent: rgba(32, 33, 36, 0.6);
            --second-background-color: #2d2e32;
            --third-background-color: #34353a;
            --third-background-color-transparent: rgba(32, 33, 36, 0.6);
            --primary-color: #0066CC;
            --first-text-color: #ffffff;
            --second-text-color: #eeeeee;
            --third-text-color: #bebec6;
            --fourth-text-color: #999999;
            --default-text-color: #bebec6;
            --invert-text-color: #373D3F;
            --border-color: rgba(255, 255, 255, 0.08);
            --selection-color: #0066CC;
            --shadow-color-1: rgba(255, 255, 255, 0.08);
            --shadow-color-2: rgba(255, 255, 255, 0.05);
        }
        
        :root[data-theme="light"] {
            --background-color: #fff;
            --background-color-transparent: rgba(255, 255, 255, 0.6);
            --second-background-color: #f8f8f8;
            --third-background-color: #f2f2f2;
            --third-background-color-transparent: rgba(241, 241, 241, 0.6);
            --primary-color: #0066CC;
            --first-text-color: #16171a;
            --second-text-color: #2f3037;
            --third-text-color: #5e5e5e;
            --fourth-text-color: #eeeeee;
            --default-text-color: #373D3F;
            --invert-text-color: #bebec6;
            --border-color: rgba(0, 0, 0, 0.08);
            --selection-color: #0066CC;
            --shadow-color-1: rgba(0, 0, 0, 0.08);
            --shadow-color-2: rgba(0, 0, 0, 0.05);
        }
        
        body {
            background-color: var(--background-color);
            color: var(--default-text-color);
        }
        
        /* Apply body classes as soon as DOM is ready */
        :root[data-theme="dark"] body {
            background-color: var(--background-color);
            color: var(--default-text-color);
        }
    </style>
    
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://skyi23.github.io/2024/11/11/java web 开发基础/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
    
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/null" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/null">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/null">
    <!--- Page Info-->
    
    <title>
        
            Java Web 开发基础 | sky123&#39;s site
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/css/build/tailwind.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
        <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">
    
    
    
    
    

    <script id="hexo-configurations">
    window.config = {"hostname":"skyi23.github.io","root":"/","language":"en","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"delete_mask":false,"title_alignment":"left","headings_top_spacing":{"h1":"3.2rem","h2":"2.4rem","h3":"1.9rem","h4":"1.6rem","h5":"1.4rem","h6":"1.3rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":false,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":true,"family":"JetBrains Mono","url":"https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap"}},"toc":{"enable":true,"max_depth":5,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":true,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":false,"custom_message":null},"side_tools":{"gear_rotation":true,"auto_expand":false},"open_graph":{"enable":false,"image":"/images/redefine-og.webp","description":"Hexo Theme Redefine, Redefine Your Hexo Journey."},"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/wallhaven-wqery6-light.webp","dark":"/images/wallhaven-wqery6-dark.webp"},"title":"sky123's blog","subtitle":{"text":["书有未曾经我读，事无不可对人言"],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":false,"style":"default","links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":null},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":true,"version":"11.4.1"}},"version":"2.8.5","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"分类":{"icon":"fa-solid fa-folder","path":"/categories/"},"标签":{"icon":"fa-solid fa-tags","path":"/tags/"},"书签":{"icon":"fa-solid fa-bookmark","path":"/bookmarks/"}},"search":{"enable":true,"preload":true}},"page_templates":{"bookmarks_column":3,"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":null},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2024/11/7 00:00:00"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha256-TThEtR+XalhWKkfF383YLOrI50NGNeIqrzS+q08afrY=" crossorigin="anonymous"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>



<body>
	<div class="progress-bar-container">
	
	<span class="scroll-progress-bar"></span>
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                sky123&#39;s site
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    HOME
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/categories/"
                                        >
                                    <i class="fa-solid fa-folder fa-fw"></i>
                                    分类
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags/"
                                        >
                                    <i class="fa-solid fa-tags fa-fw"></i>
                                    标签
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/bookmarks/"
                                        >
                                    <i class="fa-solid fa-bookmark fa-fw"></i>
                                    书签
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                HOME
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/categories/"
                        >
                            <span>
                                分类
                            </span>
                            
                                <i class="fa-solid fa-folder fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags/"
                        >
                            <span>
                                标签
                            </span>
                            
                                <i class="fa-solid fa-tags fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/bookmarks/"
                        >
                            <span>
                                书签
                            </span>
                            
                                <i class="fa-solid fa-bookmark fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">11</div>
        <div class="label text-third-text-color text-sm">Tags</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">14</div>
        <div class="label text-third-text-color text-sm">Categories</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">40</div>
        <div class="label text-third-text-color text-sm">Posts</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			<div class="w-full flex items-center pt-6 justify-start">
				<h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">Java Web 开发基础</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="/images/icon.jpg">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">sky123</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2024-11-11 23:54:46</span>
        <span class="mobile">2024-11-11 23:54:46</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-03-10 22:07:04</span>
            <span class="mobile">2025-03-10 22:07:04</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/web/">web</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/web/java-web/">java web</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/java-web/">java web</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>18.6k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>79 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<h1 id="Java-Web-总览"><a href="#Java-Web-总览" class="headerlink" title="Java Web 总览"></a>Java Web 总览</h1><pre class="mermaid">sequenceDiagram
    participant Client as 客户端
    participant WebServer as Java Web服务器
    participant Container as Web容器
    participant Listener as Listener
    participant Filter as Filter
    participant Servlet as Servlet

    Client->>WebServer: 发起请求
    activate WebServer

    WebServer->>Container: 处理请求
    activate Container
    
    Container->>Listener: 触发监听事件
    activate Listener

    Listener-->>Container: 监听事件处理完毕
    deactivate Listener

    Container->>Filter: 过滤请求内容
    activate Filter
    Note over Filter: 过滤器链

    Filter-->>Filter: 链式调用
    activate Filter

    Filter->>Servlet: 调用特定 Servlet
    activate Servlet

    Servlet-->>Filter: Servlet 处理完毕
    deactivate Servlet    

    Filter-->>Container: 过滤响应内容
    deactivate Filter

    Container-->>WebServer: 返回响应
    deactivate Container

    WebServer-->>Client: 返回响应
    deactivate WebServer</pre>

<h2 id="Java-Web-组成"><a href="#Java-Web-组成" class="headerlink" title="Java Web 组成"></a>Java Web 组成</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/9e18cedc518b4d7e99747f5c072e4141.png"
                     
                ></p>
<h3 id="Web-服务器"><a href="#Web-服务器" class="headerlink" title="Web 服务器"></a>Web 服务器</h3><ul>
<li><strong>功能</strong>：Web服务器用于接收并处理客户端的 HTTP 请求，并将请求分发给合适的处理组件（如 Servlet）。常见的 Java Web 服务器包括 Apache Tomcat、Jetty 等。</li>
<li><strong>工作方式</strong>：<ul>
<li><strong>请求处理</strong>：服务器接受来自客户端的请求，分析请求路径和参数，将其分发给对应的 Servlet。</li>
<li><strong>资源管理</strong>：服务器负责管理应用程序的资源，如静态文件（HTML、CSS、JavaScript 等）、动态内容生成组件（Servlet、JSP等）。</li>
</ul>
</li>
</ul>
<h3 id="前端相关"><a href="#前端相关" class="headerlink" title="前端相关"></a>前端相关</h3><h4 id="HTML-CSS-JavaScript"><a href="#HTML-CSS-JavaScript" class="headerlink" title="HTML&#x2F;CSS&#x2F;JavaScript"></a>HTML&#x2F;CSS&#x2F;JavaScript</h4><ul>
<li><strong>功能</strong>：这些是 Web 页面的前端技术，用于构建和呈现用户界面：<ul>
<li><strong>HTML</strong>：定义网页的结构和内容。</li>
<li><strong>CSS</strong>：用于美化和布局 HTML 页面，使其具有良好的外观和响应式设计。</li>
<li><strong>JavaScript</strong>：用于在客户端实现动态交互和逻辑处理，如表单验证、动态内容更新等。</li>
</ul>
</li>
</ul>
<h4 id="JSP（JavaServer-Pages）"><a href="#JSP（JavaServer-Pages）" class="headerlink" title="JSP（JavaServer Pages）"></a>JSP（JavaServer Pages）</h4><ul>
<li><strong>功能</strong>：JSP 是一种基于Java的技术，用于快速生成动态 Web 页面。JSP 页面允许在 HTML 中嵌入 Java 代码，用于显示动态数据或处理用户输入。</li>
<li><strong>工作方式</strong>：<ul>
<li><strong>编译为 Servlet</strong>：每个 JSP 页面在第一次请求时都会被编译为一个 Servlet 类，并由 Servlet 容器管理。</li>
<li><strong>动态内容生成</strong>：JSP 页面可以通过 Java 代码生成动态内容，并在 HTML 中展示，如从数据库读取数据并显示在页面上。</li>
</ul>
</li>
</ul>
<h3 id="后端相关"><a href="#后端相关" class="headerlink" title="后端相关"></a>后端相关</h3><h4 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h4><ul>
<li><strong>功能</strong>：Servlet 是 Java Web 应用的核心组件，用于处理来自客户端的请求并生成动态响应。Servlet 能够处理业务逻辑、与数据库交互、生成 HTML 或 JSON 响应等。</li>
<li><strong>工作方式</strong>：<ul>
<li><strong>初始化</strong>：当 Web 服务器启动或请求第一次到达时，Servlet 会被加载并初始化。</li>
<li><strong>处理请求</strong>：每次客户端发送请求时，Servlet 会调用相应的 <code>doGet()</code>、<code>doPost()</code> 方法来处理请求，并生成响应。</li>
<li><strong>销毁</strong>：当服务器关闭或应用被卸载时，Servlet 会被销毁，释放资源。</li>
</ul>
</li>
</ul>
<h4 id="Filter（过滤器）"><a href="#Filter（过滤器）" class="headerlink" title="Filter（过滤器）"></a><strong>Filter（过滤器）</strong></h4><ul>
<li><strong>功能</strong>：Filter 是用于拦截和处理 HTTP 请求和响应的组件。它可以在请求到达 Servlet 之前或响应返回客户端之前执行一些通用的任务，如日志记录、身份验证、字符编码设置等。</li>
<li><strong>工作方式</strong>：<ul>
<li><strong>预处理请求</strong>：Filter 可以在请求到达 Servlet 之前，对请求进行检查或修改。</li>
<li><strong>后处理响应</strong>：Filter 可以在 Servlet 生成响应后，对响应进行修改或增强。</li>
<li><strong>链式处理</strong>：多个 Filter 可以形成一个链，按顺序依次处理请求和响应。</li>
</ul>
</li>
</ul>
<h4 id="Listener（监听器）"><a href="#Listener（监听器）" class="headerlink" title="Listener（监听器）"></a><strong>Listener（监听器）</strong></h4><ul>
<li><strong>功能</strong>：Listener 用于监听 Web 应用中的特定事件（如应用启动、会话创建、请求处理等），并在事件发生时执行相应的操作。</li>
<li><strong>工作方式</strong>：<ul>
<li><strong>事件监听</strong>：Listener 会在特定事件（如应用启动或会话销毁）发生时被自动触发。</li>
<li><strong>资源管理</strong>：常用于初始化资源（如数据库连接池）或清理资源（如会话数据）。</li>
</ul>
</li>
</ul>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><ul>
<li><strong>功能</strong>：数据库用于存储和管理应用程序的数据。Java Web 应用通常通过 JDBC 或其他持久化框架（如Hibernate）与数据库交互，执行数据的增删改查操作。</li>
<li><strong>工作方式</strong>：<ul>
<li><strong>数据持久化</strong>：应用程序可以通过Java代码与数据库进行交互，执行 SQL 语句，存储或检索数据。</li>
<li><strong>事务管理</strong>：数据库通常支持事务，确保数据操作的原子性和一致性。</li>
</ul>
</li>
</ul>
<h2 id="MVC-模式和三层架构"><a href="#MVC-模式和三层架构" class="headerlink" title="MVC 模式和三层架构"></a>MVC 模式和三层架构</h2><h3 id="MVC-模式"><a href="#MVC-模式" class="headerlink" title="MVC 模式"></a>MVC 模式</h3><p>MVC（Model-View-Controller）模式是一种软件设计模式，广泛应用于 Web 开发中，用于分离应用程序的内部表示和用户界面。MVC 将应用程序分为三层：<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/d8b371898b14467eb785acc996f5223c.png"
                     
                ></p>
<ul>
<li><strong>M</strong>：模型层（Model），业务模型，处理业务</li>
<li><strong>V</strong>：视图层（View），视图，界面展示</li>
<li><strong>C</strong>：控制层（Controller），控制器，处理请求，调用模型和视图</li>
</ul>
<p>这种模式的主要目的是实现关注点分离，使得应用程序的开发、测试和维护更加简单和高效。</p>
<h3 id="三层架构"><a href="#三层架构" class="headerlink" title="三层架构"></a>三层架构</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/a38894f51a944d9b97b73a938391b980.png"
                     
                ></p>
<ul>
<li>数据访问层：对数据库的 CRUD 基本操作</li>
<li>业务逻辑层：对业务逻辑进行封装，组合数据访问层中基本功能，形成复杂的业务逻辑功能。</li>
<li>表现层：接收请求，封装数据，调用业务逻辑层，响应数据。</li>
</ul>
<h3 id="MVC-和-三层架构"><a href="#MVC-和-三层架构" class="headerlink" title="MVC 和 三层架构"></a>MVC 和 三层架构</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/d1c5216b82ef4a8e8b0a31b95fa227d1.png"
                     
                ><br>可以将 MVC 模式理解成是一个大的概念，而三层架构是对 MVC 模式实现架构的思想。 那么我们以后按照要求将不同层的代码写在不同的包下，每一层里功能职责做到单一，将来如果将表现层的技术换掉，而业务逻辑层和数据访问层的代码不需要发生变化。</p>
<h2 id="域对象"><a href="#域对象" class="headerlink" title="域对象"></a>域对象</h2><p>在 Java Web 开发中，”域对象”（Scope Object）是指用于在不同范围内存储和共享数据的对象。这些域对象提供了一种在不同组件之间传递数据的机制。</p>
<p>Java Web应用中常用的四大域对象是：<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/3c655cf2af794e7fb9378ed26c81a2e8.png"
                     
                ></p>
<ol>
<li><strong>PageContext（页面范围）</strong></li>
<li><strong>HttpServletRequest（请求范围）</strong></li>
<li><strong>HttpSession（会话范围）</strong></li>
<li><strong>ServletContext（应用范围）</strong></li>
</ol>
<p>关于传输数据这里可以理解为存储全局变量（属性，以键值对的形式存在）的地方，只不过不同的域对象存活周期不同，也就是变量的作用域不同。通常域对象有如下三个方法来管理属性：</p>
<ul>
<li><code>setAttribute(String name, Object value)</code>：设置属性</li>
<li><code>getAttribute(String name)</code>：获取属性</li>
<li><code>removeAttribute(String name)</code>：移除属性</li>
</ul>
<h3 id="PageContext（页面范围）"><a href="#PageContext（页面范围）" class="headerlink" title="PageContext（页面范围）"></a>PageContext（页面范围）</h3><p><strong>PageContext</strong> 对象在 JSP 页面中使用，表示页面范围的数据存储。它是生命周期最短的域对象，数据仅在当前页面内有效，无法在页面之间传递。</p>
<ul>
<li><strong>作用范围</strong>：当前 JSP 页面。从页面开始处理到页面输出完成为止。</li>
<li><strong>使用场景</strong><ul>
<li>在同一个 JSP 页面内共享数据，适合短暂的数据传递。</li>
<li>用于存储仅在当前页面中使用的临时变量或对象。</li>
</ul>
</li>
</ul>
<h3 id="HttpServletRequest（请求范围）"><a href="#HttpServletRequest（请求范围）" class="headerlink" title="HttpServletRequest（请求范围）"></a>HttpServletRequest（请求范围）</h3><p><strong>HttpServletRequest</strong> 对象表示请求范围的数据存储。数据在一次 HTTP 请求过程中有效，用于在请求期间在多个组件（如Servlet、JSP）之间传递数据。</p>
<ul>
<li><strong>作用范围</strong>：当前 HTTP 请求。从请求到达服务器开始，到服务器处理完成并发送响应为止。</li>
<li><strong>使用场景</strong><ul>
<li>在一次 HTTP 请求的过程中共享数据，例如在 Servlet 之间或 Servlet 与 JSP 之间传递数据。</li>
<li>适合存储仅在一次请求期间有效的数据，如表单数据、查询参数等。</li>
</ul>
</li>
</ul>
<h3 id="HttpSession（会话范围）"><a href="#HttpSession（会话范围）" class="headerlink" title="HttpSession（会话范围）"></a>HttpSession（会话范围）</h3><p><strong>HttpSession</strong> 对象表示会话范围的数据存储。数据在用户的整个会话期间有效，用于在同一用户的多个请求之间共享数据。</p>
<ul>
<li><strong>作用范围</strong>：用户会话。从会话创建（通常是用户第一次访问）到会话失效或销毁为止。</li>
<li><strong>使用场景</strong><ul>
<li>在用户的整个会话期间共享数据，如用户的登录信息、购物车内容等。</li>
<li>适合存储需要跨请求保存的用户状态信息。</li>
</ul>
</li>
</ul>
<h3 id="ServletContext（应用范围）"><a href="#ServletContext（应用范围）" class="headerlink" title="ServletContext（应用范围）"></a>ServletContext（应用范围）</h3><p><strong>ServletContext</strong> 对象表示应用范围的数据存储。数据在整个Web应用程序的生命周期内有效，用于在整个应用程序中共享数据。</p>
<ul>
<li><strong>作用范围</strong>：整个Web应用。从应用程序启动到应用程序关闭为止。</li>
<li><strong>使用场景</strong><ul>
<li>在整个应用程序中共享数据，如应用程序的配置信息、全局计数器等。</li>
<li>适合存储全局性的数据，所有用户和请求都可以访问这些数据。</li>
</ul>
</li>
</ul>
<h1 id="Maven-Web-项目"><a href="#Maven-Web-项目" class="headerlink" title="Maven Web 项目"></a>Maven Web 项目</h1><p><strong>Maven</strong> 是一个基于项目对象模型（POM，Project Object Model）的项目管理和构建工具，主要用于管理 Java 项目的依赖和构建过程。它提供了一套标准的项目结构、依赖管理和构建生命周期，旨在简化项目的构建、报告和文档过程。</p>
<h2 id="Maven-Web-项目结构"><a href="#Maven-Web-项目结构" class="headerlink" title="Maven Web 项目结构"></a>Maven Web 项目结构</h2><p>Maven Web 项目有一套标准的项目结构，从而使得项目在不同的开发环境下通用。</p>
<h3 id="Maven-Web-开发项目结构"><a href="#Maven-Web-开发项目结构" class="headerlink" title="Maven Web 开发项目结构"></a>Maven Web 开发项目结构</h3><p>一个典型的 Maven Web 项目目录结构如下所示：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">my-web-app/                      <span class="comment"># 项目根目录，Maven 项目根目录</span></span><br><span class="line">├── pom.xml                      <span class="comment"># Maven 的配置文件，定义项目依赖、构建过程、插件等</span></span><br><span class="line">└── src/                         <span class="comment"># 项目源码和资源文件</span></span><br><span class="line">    ├── main/                    <span class="comment"># 主应用的源代码和资源目录</span></span><br><span class="line">    │   ├── java/                <span class="comment"># Java 源代码目录</span></span><br><span class="line">    │   │   └── com/</span><br><span class="line">    │   │       └── example/</span><br><span class="line">    │   │           └── servlet/</span><br><span class="line">    │   │               └── HelloServlet.java   <span class="comment"># 示例 Servlet 类，处理 HTTP 请求</span></span><br><span class="line">    │   ├── resources/           <span class="comment"># 资源文件目录（如配置文件、消息文件等）</span></span><br><span class="line">    │   │   └── config.properties  <span class="comment"># 应用程序的配置文件</span></span><br><span class="line">    │   └── webapp/              <span class="comment"># Web 应用的资源目录（与 web 容器直接相关的资源）</span></span><br><span class="line">    │       ├── META-INF/        <span class="comment"># 元数据目录（通常存放 MANIFEST.MF 文件，几乎不手动编辑）</span></span><br><span class="line">    │       ├── WEB-INF/         <span class="comment"># Web 应用的私有目录，客户端无法直接访问</span></span><br><span class="line">    │       │   ├── web.xml      <span class="comment"># Web 应用的部署描述符，配置 Servlet、过滤器、监听器等</span></span><br><span class="line">    │       │   └── jsp/         <span class="comment"># 存放 JSP 页面，防止直接通过 URL 访问</span></span><br><span class="line">    │       │       └── index.jsp</span><br><span class="line">    │       ├── css/             <span class="comment"># 存放样式表文件的目录</span></span><br><span class="line">    │       │   └── styles.css</span><br><span class="line">    │       ├── js/              <span class="comment"># 存放 JavaScript 文件的目录</span></span><br><span class="line">    │       │   └── scripts.js</span><br><span class="line">    │       └── images/          <span class="comment"># 存放图片资源的目录</span></span><br><span class="line">    │           └── logo.png</span><br><span class="line">    └── <span class="built_in">test</span>/                    <span class="comment"># 测试源码和资源目录</span></span><br><span class="line">        ├── java/                <span class="comment"># 测试代码目录</span></span><br><span class="line">        │   └── com/</span><br><span class="line">        │       └── example/</span><br><span class="line">        │           └── servlet/</span><br><span class="line">        │               └── HelloServletTest.java  <span class="comment"># 对 HelloServlet 的单元测试</span></span><br><span class="line">        └── resources/           <span class="comment"># 测试资源文件目录</span></span><br><span class="line">            └── test-config.properties  <span class="comment"># 测试时使用的配置文件（如模拟环境配置）</span></span><br></pre></td></tr></table></figure></div>

<h3 id="构建后的-Web-应用目录结构"><a href="#构建后的-Web-应用目录结构" class="headerlink" title="构建后的 Web 应用目录结构"></a>构建后的 Web 应用目录结构</h3><p>在 Maven Web 项目中，<code>target</code> 目录是 Maven 构建过程中生成的目录，包含了编译后的类文件、资源文件、测试文件，以及打包后的 WAR 文件。其中包后的 WAR 文件包含以下目录结构：</p>
<div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">my-web-app-1.0.0.war             <span class="comment"># WAR 文件（解压后的目录结构）</span></span><br><span class="line">├── META-INF/                    <span class="comment"># 元数据目录（JAR 和 WAR 的标准目录）</span></span><br><span class="line">│   └── MANIFEST.MF              <span class="comment"># 清单文件，描述应用的基本信息</span></span><br><span class="line">├── WEB-INF/                     <span class="comment"># Web 应用的私有目录（客户端无法直接访问）</span></span><br><span class="line">│   ├── classes/                 <span class="comment"># 编译后的类文件和资源文件</span></span><br><span class="line">│   │   ├── com/</span><br><span class="line">│   │   │   └── example/</span><br><span class="line">│   │   │       └── servlet/</span><br><span class="line">│   │   │           └── HelloServlet.class  <span class="comment"># 编译后的 Servlet 类</span></span><br><span class="line">│   │   └── config.properties    <span class="comment"># 从 src/main/resources/ 复制过来的配置文件</span></span><br><span class="line">│   ├── lib/                     <span class="comment"># 项目依赖的 Jar 包，Maven 会根据 pom.xml 中的依赖配置，将所有的依赖 Jar 包复制到这个目录中。</span></span><br><span class="line">│   │   ├── some-dependency-1.0.0.jar</span><br><span class="line">│   │   ├── another-lib-2.0.0.jar</span><br><span class="line">│   │   └── ...                  <span class="comment"># 其他项目依赖的 Jar 包</span></span><br><span class="line">│   ├── web.xml                  <span class="comment"># 复制自 src/main/webapp/WEB-INF/web.xml</span></span><br><span class="line">│   └── jsp/                     <span class="comment"># 存放 JSP 文件，避免直接通过 URL 访问</span></span><br><span class="line">│       └── index.jsp</span><br><span class="line">├── css/                         <span class="comment"># 复制自 src/main/webapp/css/</span></span><br><span class="line">│   └── styles.css</span><br><span class="line">├── js/                          <span class="comment"># 复制自 src/main/webapp/js/</span></span><br><span class="line">│   └── scripts.js</span><br><span class="line">└── images/                      <span class="comment"># 复制自 src/main/webappimages/</span></span><br><span class="line">    └── logo.png</span><br></pre></td></tr></table></figure></div>

<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><p><code>pom.xml</code> 是 Maven 项目的核心配置文件。<code>POM</code> 是 <code>Project Object Model</code> 的缩写，它定义了一个 Maven 项目的基础信息、依赖关系、构建过程、插件等。</p>
<h3 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h3><p>一个典型的 <code>pom.xml</code> 文件结构如下：</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span>    <span class="comment">&lt;!-- POM 模型的版本号，通常是 4.0.0 --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 项目的基本信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>        <span class="comment">&lt;!-- 项目的组织唯一标识（一般是公司域名的倒置） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>my-web-app<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>   <span class="comment">&lt;!-- 项目的名称，构建产物的名称 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span>              <span class="comment">&lt;!-- 项目的版本号 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span>            <span class="comment">&lt;!-- 打包类型（jar、war、pom等），Web 项目通常是 war --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 项目的名称和描述信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>My Web Application<span class="tag">&lt;/<span class="name">name</span>&gt;</span>       <span class="comment">&lt;!-- 项目的名称（可选） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>A simple Java web application using Maven<span class="tag">&lt;/<span class="name">description</span>&gt;</span> <span class="comment">&lt;!-- 项目描述（可选） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.example.com<span class="tag">&lt;/<span class="name">url</span>&gt;</span>     <span class="comment">&lt;!-- 项目主页（可选） --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 项目依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>       <span class="comment">&lt;!-- 依赖范围，表示该依赖由容器提供，不会打包到 WAR 中 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 构建配置信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span>  <span class="comment">&lt;!-- 指定 Java 源代码版本 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span>  <span class="comment">&lt;!-- 指定编译后的字节码版本 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h3><p><code>&lt;dependencies&gt;</code> 元素用于定义项目的依赖库。<code>&lt;dependencys&gt;</code> 中可以放多个 <code>&lt;dependency&gt;</code>，每个 <code>&lt;dependency&gt;</code> 表示一个依赖，Maven 会自动从中央仓库或私有仓库下载这些依赖。在 IDEA 中我们可以使用 <code>Alt</code>+<code>Insert</code> 快捷键在 <code>pom.xml</code> 中添加依赖。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="comment">&lt;!-- 依赖库的组织标识 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> <span class="comment">&lt;!-- 依赖库的名称 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span>            <span class="comment">&lt;!-- 依赖的版本号 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>            <span class="comment">&lt;!-- 依赖范围 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>其中 <code>&lt;scope&gt;</code> 元素在配置的时候需要格外注意：</p>
<ul>
<li>**<code>compile</code>**（默认）：编译时、测试时和运行时都需要的依赖，最终会被打包。</li>
<li>**<code>provided</code>**：编译和测试时需要，但运行时由容器提供，不会被打包（如 <code>javax.servlet</code>）。</li>
<li>**<code>runtime</code>**：运行和测试时需要，编译时不需要（如数据库驱动）。</li>
<li>**<code>test</code>**：仅测试时需要，不会被打包（如 JUnit）。</li>
</ul>
<h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><p><code>&lt;build&gt;</code> 元素用于定义项目的构建过程，包括插件、编译配置等。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span>        <span class="comment">&lt;!-- 指定 Java 源代码版本 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span>        <span class="comment">&lt;!-- 指定编译后的字节码版本 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span>  <span class="comment">&lt;!-- 源代码文件的编码格式 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h3><p><code>&lt;properties&gt;</code> 元素用于定义 Maven 构建过程中的变量，方便在 <code>pom.xml</code> 中多次引用。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>**<code>&lt;project.build.sourceEncoding&gt;</code>**：指定项目的编码格式。</li>
<li><strong><code>&lt;maven.compiler.source&gt;</code></strong> 和 **<code>&lt;maven.compiler.target&gt;</code>**：指定编译源和目标 Java 版本。</li>
</ul>
<h2 id="IDEA中创建-Maven-Web-项目"><a href="#IDEA中创建-Maven-Web-项目" class="headerlink" title="IDEA中创建 Maven Web 项目"></a>IDEA中创建 Maven Web 项目</h2><h3 id="使用项目模板"><a href="#使用项目模板" class="headerlink" title="使用项目模板"></a>使用项目模板</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/57d08da34d1145398adda90c9b32d0de.png"
                     
                ></p>
<h3 id="不使用项目模板"><a href="#不使用项目模板" class="headerlink" title="不使用项目模板"></a>不使用项目模板</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/1c27328a50454b51abefc53fcf94f270.png"
                     
                ></p>
<h1 id="Java-Web-服务器"><a href="#Java-Web-服务器" class="headerlink" title="Java Web 服务器"></a>Java Web 服务器</h1><p>Java Web应用程序通常部署在Web服务器上，Web服务器处理客户端的HTTP请求，并将请求转发到Web应用程序进行处理。以下是一些常见的Java Web服务器环境：</p>
<h2 id="Apache-Tomcat"><a href="#Apache-Tomcat" class="headerlink" title="Apache Tomcat"></a>Apache Tomcat</h2><p>Apache Tomcat 是一个开源的 Web 服务器和 Servlet 容器，用于运行 Java Servlet 和 JavaServer Pages (JSP) 应用程序。它是 Java Web 开发中最常用的服务器之一。</p>
<h3 id="安装和配置"><a href="#安装和配置" class="headerlink" title="安装和配置"></a>安装和配置</h3><ol>
<li><p>下载 <a class="link"   target="_blank" rel="noopener" href="https://tomcat.apache.org/" >Apache Tomcat<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>.</p>
</li>
<li><p>解压下载的文件。</p>
</li>
<li><p>将Web应用程序的WAR文件部署到 <code>webapps</code> 目录下。</p>
</li>
<li><p>启动Tomcat服务器，运行 <code>bin/startup.sh</code>（Linux&#x2F;Unix）或 <code>bin/startup.bat</code>（Windows）。</p>
<p>其中 windows 需要设置 <code>JAVA_HOME</code> 环境变量：</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set JAVA_HOME=C:\Program Files\Java\jdk-21\</span><br></pre></td></tr></table></figure></div></li>
</ol>
<p>注意事项：</p>
<ul>
<li><p>控制台如果出现中文乱码，需要修改 <code>conf/logging.properties</code> 的 <code>java.util.logging.ConsoleHandler.encoding = GBK</code>。</p>
</li>
<li><p>关闭服务器：</p>
<ul>
<li>直接关掉运行窗口：强制关闭</li>
<li><code>bin\shutdown.bat</code>：正常关闭</li>
<li><code>Ctrl+C</code>：正常关闭</li>
</ul>
</li>
<li><p>修改启动端口号：<code>conf/server.xml</code></p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxParameterCount</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">           /&gt;</span></span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="IDEA-中使用-Tomcat"><a href="#IDEA-中使用-Tomcat" class="headerlink" title="IDEA 中使用 Tomcat"></a>IDEA 中使用 Tomcat</h3><h4 id="使用安装的-Tomcat"><a href="#使用安装的-Tomcat" class="headerlink" title="使用安装的 Tomcat"></a>使用安装的 Tomcat</h4><p>在 IDEA 中配置 Tomcat 服务器，可以让 IDEA 自动操作 Tomcat 服务器完成项目部署。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/7cce44a84acf445db18825ea8c6f9f5f.png"
                     
                ></p>
<h4 id="使用-Maven-Tomcat-插件"><a href="#使用-Maven-Tomcat-插件" class="headerlink" title="使用 Maven Tomcat 插件"></a>使用 Maven Tomcat 插件</h4><p>Maven 中的 Tomcat 插件主要用于将 Web 应用程序部署到嵌入式的 Tomcat 服务器，或是远程部署到已经运行的 Tomcat 服务器。这使得在开发、测试和持续集成过程中，无需手动操作服务器配置，便可以快速启动和测试 Web 应用。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span>                         <span class="comment">&lt;!-- 应用的上下文路径 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">port</span>&gt;</span>8080<span class="tag">&lt;/<span class="name">port</span>&gt;</span>                      <span class="comment">&lt;!-- Tomcat 服务器的端口 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span>       <span class="comment">&lt;!-- 请求的编码设置 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scanIntervalSeconds</span>&gt;</span>10<span class="tag">&lt;/<span class="name">scanIntervalSeconds</span>&gt;</span> <span class="comment">&lt;!-- 热部署的扫描间隔时间（秒） --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="常见目录及文件"><a href="#常见目录及文件" class="headerlink" title="常见目录及文件"></a>常见目录及文件</h3><ul>
<li><strong>bin</strong>：可执行文件存放目录<ul>
<li><strong>startup.bat &#x2F; startup.sh</strong>：启动 Tomcat 的脚本文件（分别用于 Windows 和Unix&#x2F;Linux系统）。</li>
<li><strong>shutdown.bat &#x2F; shutdown.sh</strong>：关闭 Tomcat 的脚本文件（分别用于 Windows 和 Unix&#x2F;Linux 系统）。</li>
<li><strong>catalina.bat &#x2F; catalina.sh</strong>：主要的启动脚本，提供了多种启动选项和命令。</li>
<li><strong>tomcat-juli.jar</strong>：Tomcat 的日志管理工具。</li>
</ul>
</li>
<li><strong>conf</strong>：配置文件存放目录<ul>
<li><strong>server.xml</strong>：Tomcat 的主要配置文件，定义了服务器的基本设置、连接器、虚拟主机等。</li>
<li><strong>web.xml</strong>：全局的 Web 应用程序部署描述文件，定义了 Servlet、过滤器、监听器等。</li>
<li><strong>context.xml</strong>：默认的上下文配置文件，可以为每个 Web 应用程序定义单独的上下文。</li>
<li><strong>tomcat-users.xml</strong>：定义 Tomcat 用户和角色的配置文件，主要用于管理控制台的用户认证。</li>
<li><strong>logging.properties</strong>：日志配置文件，用于配置 Tomcat 的日志输出格式和级别。</li>
</ul>
</li>
<li><strong>lib</strong>：Tomcat 依赖的 jar 包<ul>
<li><strong>servlet-api.jar</strong>：Servlet API 的实现包。</li>
<li><strong>jsp-api.jar</strong>：JSP API 的实现包。</li>
<li><strong>el-api.jar</strong>：表达式语言（EL）的实现包。</li>
<li><strong>其他jar包</strong>：Tomcat 运行所需的各种库文件。</li>
</ul>
</li>
<li><strong>logs</strong>：日志文件<ul>
<li><strong>catalina.out</strong>：默认的 Tomcat 日志输出文件，包含 Tomcat 启动、运行时的信息和错误。</li>
<li><strong>localhost_access_log.*.txt</strong>：访问日志文件，记录了每个 HTTP 请求的详细信息。</li>
<li><strong>其他日志文件</strong>：如 manager、host-manager 等应用的日志文件。</li>
</ul>
</li>
<li><strong>temp</strong>：Tomcat 在运行过程中生成的临时文件目录。Tomcat 会在启动时将某些数据存储在这里，并在关闭时清理这些数据。</li>
<li><strong>webapps</strong>：应用发布目录<ul>
<li><strong>ROOT</strong>：默认的 Web 应用程序。</li>
<li><strong>其他 Web 应用</strong>：部署的 Web 应用程序目录或 WAR 文件。将 Web 应用程序的目录或 WAR 文件放在这个目录下，Tomcat 会自动解压和部署。</li>
</ul>
</li>
<li><strong>work</strong>：工作目录，Tomcat 在运行过程中生成的工作文件目录，包括编译后的 JSP 文件的 Servlet 类文件等。</li>
</ul>
<h2 id="Jetty"><a href="#Jetty" class="headerlink" title="Jetty"></a>Jetty</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Jetty是一个轻量级的开源Web服务器和Servlet容器，特别适用于嵌入式系统和云环境。它可以嵌入到Java应用程序中。</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li><strong>轻量级和高性能</strong>：适合需要快速响应和低资源消耗的应用。</li>
<li><strong>灵活</strong>：可以嵌入到Java应用中作为组件使用。</li>
<li><strong>支持WebSocket</strong>：适用于实时Web应用。</li>
</ul>
<h3 id="安装和配置-1"><a href="#安装和配置-1" class="headerlink" title="安装和配置"></a>安装和配置</h3><ol>
<li>下载 <a class="link"   target="_blank" rel="noopener" href="https://www.eclipse.org/jetty/" >Jetty<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>.</li>
<li>解压下载的文件。</li>
<li>将Web应用程序的WAR文件部署到<code>webapps</code>目录下。</li>
<li>启动Jetty服务器，运行<code>java -jar start.jar</code>。</li>
</ol>
<h1 id="Java-数据库相关"><a href="#Java-数据库相关" class="headerlink" title="Java 数据库相关"></a>Java 数据库相关</h1><h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><p>JDBC（Java Database Connectivity）是 Java 中用于访问和操作关系型数据库的 API。它为开发者提供了一组标准接口，使得 Java 程序能够与各种数据库进行交互，而不必考虑具体数据库的底层实现。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/1cc48c9bd2514ae286c959618c612974.png"
                     
                ></p>
<h3 id="JDBC-操作的基本步骤"><a href="#JDBC-操作的基本步骤" class="headerlink" title="JDBC 操作的基本步骤"></a>JDBC 操作的基本步骤</h3><p>以下是一个简单的 JDBC 示例代码，它展示了如何连接到数据库并执行 SQL 查询：</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. 加载 JDBC 驱动</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. 获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/mydatabase&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. 创建 Statement 对象</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT id, name FROM users&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. 执行查询</span></span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. 处理查询结果</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;ID: &quot;</span> + id);</span><br><span class="line">                System.out.print(<span class="string">&quot;, Name: &quot;</span> + name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// 6. 关闭资源</span></span><br><span class="line">                <span class="keyword">if</span> (rs != <span class="literal">null</span>) rs.close();</span><br><span class="line">                <span class="keyword">if</span> (stmt != <span class="literal">null</span>) stmt.close();</span><br><span class="line">                <span class="keyword">if</span> (conn != <span class="literal">null</span>) conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="加载驱动"><a href="#加载驱动" class="headerlink" title="加载驱动"></a>加载驱动</h4><p>在 JDBC 中，JVM 需要知道如何与特定类型的数据库进行通信。不同的数据库系统有不同的协议、命令和数据格式，因此需要通过数据库厂商提供的 JDBC 驱动程序来处理这些特定的细节。</p>
<p>每种数据库管理系统（DBMS）通常都会提供自己的 JDBC 驱动程序。这个驱动程序通常是一个或多个 JAR 文件，包含了该数据库的具体实现。</p>
<p>每种数据库管理系统的 JDBC 驱动程序都会实现 <code>java.sql.Driver</code> 接口，JDBC 通过这个接口的实现类与对应的数据库管理系统进行交互。例如 MySQL 的 JDBC 驱动类的完整类名为 <code>com.mysql.cj.jdbc.Driver</code>（旧版为 <code>com.mysql.jdbc.Driver</code>）。对应的 Maven 依赖为：</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.29<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p><code>DriverManager</code> 是一个用于管理 JDBC 驱动的类，它维护了一个已注册的 <code>Driver</code> 实例的列表。当调用 <code>DriverManager.getConnection()</code> 方法时，<code>DriverManager</code> 会遍历这些已注册的驱动，并使用能够处理给定 JDBC URL 的驱动来建立连接。</p>
<p>在 JDBC 4.0（JDK 6）之前，驱动程序需要手动通过 <code>Class.forName()</code> 方法来加载和注册。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<p>这个方法会触发静态初始化块（static initializer）。在初始化块中，<strong>驱动类</strong>会通过 <code>DriverManager.registerDriver()</code> 方法将自身注册到 <code>DriverManager</code> 中。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        java.sql.DriverManager.registerDriver(<span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>从 JDBC 4.0 开始，Java 提供了一种自动加载和注册驱动程序的机制。这种机制基于 Java 的 SPI（服务提供者接口）框架，允许驱动程序在类路径中自动注册，无需显式调用 <code>Class.forName()</code>。</p>
<p>SPI 是一种用于发现和加载服务实现的机制。在 JDBC 中，每个 JDBC 驱动程序都需要在其 JAR 文件的 <code>META-INF/services/</code> 目录下创建一个名为 <code>java.sql.Driver</code> 的文件。这个文件包含了驱动程序实现类的全限定类名。</p>
<p>当 JVM 启动时或首次调用 <code>DriverManager.getConnection()</code> 时，<code>DriverManager</code> 会通过 <code>ServiceLoader</code> 去查找所有在类路径中的 JAR 文件中 <code>META-INF/services/java.sql.Driver</code> 文件。它会读取这些文件中的类名，并自动加载这些类。</p>
<h4 id="建立连接"><a href="#建立连接" class="headerlink" title="建立连接"></a>建立连接</h4><p>通过 <code>DriverManager</code> 类的 <code>getConnection()</code> 方法来创建与数据库的连接。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/mydatabase&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;password&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong><code>jdbc</code></strong> ：表示使用 JDBC 协议。</li>
<li><strong><code>mysql</code></strong> ：数据库类型或驱动类型，例如 <code>mysql</code>、<code>postgresql</code>、<code>oracle</code> 等。</li>
<li><strong><code>localhost</code></strong> ：数据库服务器的主机名或 IP 地址。</li>
<li><strong><code>3306</code></strong> ：数据库服务器的端口号，通常是数据库的默认端口号，例如 MySQL 的默认端口是 <code>3306</code>。</li>
<li><strong><code>mydatabase</code></strong> ：要连接的数据库的名称。</li>
</ul>

  <div class="note-large blue">
    <div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center">
      <p>提示</p>

    </div>
    <div class="notel-content markdown-body">
      <p>如果连接的是本机 mysql 服务器，并且 mysql 服务默认端口是 3306，则 url 可以简写为 <code>jdbc:mysql:///数据库名称</code> 。</p>

    </div>
  </div>

<p>在实际开发中，与数据库建立连接的相关信息一般都存放于 <code>resources</code> 目录下的配置文件中，这样就不需要在修改数据库配置的情况下重新编译项目。</p>
<p>首先我们可以在 <code>src/main/resources/</code> 目录下创建一个名为 <code>db.properties</code> 的配置文件，用于存放数据库连接的相关信息：</p>
<div class="code-container" data-rel="Properties"><figure class="iseeu highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># src/main/resources/db.properties</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/mydatabase</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">username</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">password</span></span><br><span class="line"><span class="attr">jdbc.driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure></div>

<p>在 Java 代码中，通过以下方式读取这个配置文件：</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 Properties 对象，用于加载配置文件</span></span><br><span class="line"><span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取配置文件（从类路径中）</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> DatabaseConnection.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line">properties.load(input);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取配置文件中的值</span></span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;jdbc.url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> properti es.getProperty(<span class="string">&quot;jdbc.username&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;jdbc.password&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driverClassName</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;jdbc.driverClassName&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="创建-Statement-对象"><a href="#创建-Statement-对象" class="headerlink" title="创建 Statement 对象"></a>创建 Statement 对象</h4><p><code>Statement</code> 和 <code>PreparedStatement</code> 是 JDBC API 中用于执行 SQL 语句的两个主要接口。</p>
<p><code>Statement</code> 对象用于执行不带参数的简单 SQL 语句。它通常用于执行静态 SQL 查询，SQL 语句在每次执行时都是重新解析和编译的。如果通过字符串拼接实现带参数查询容易造成 SQL 注入：</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM users WHERE username = &#x27;&quot;</span> + username + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(sql);</span><br></pre></td></tr></table></figure></div>

<p><code>PreparedStatement</code> 对象用于执行带参数的 SQL 语句。与 <code>Statement</code> 不同的是，<code>PreparedStatement</code> 允许使用占位符（<code>?</code>）在 SQL 语句中代表参数，然后通过设置这些参数来执行 SQL 语句。由于 <code>PreparedStatement</code> 使用参数化查询，它能够<strong>自动对传入的参数进行转义和处理，因此能够有效防止 SQL 注入攻击</strong>。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(<span class="string">&quot;SELECT * FROM users WHERE username = ?&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">1</span>, username); <span class="comment">// 通过参数设置 SQL 语句中的占位符</span></span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pstmt.executeQuery();</span><br></pre></td></tr></table></figure></div>

<p><code>PreparedStatement</code> 另外一个好处是 SQL 语句在 <code>PreparedStatement</code> 创建时就已经预编译了。执行相同的 SQL 语句多次时，数据库不需要重新解析和编译，从而提高了性能。</p>
<p>例如批处理操作（batch processing）通过 <code>addBatch()</code> 方法将多个 SQL 语句添加到批处理中，然后通过 <code>executeBatch()</code> 一次性执行。</p>
<p><code>PreparedStatement</code> 的 SQL 语句预编译一次，批处理时只需传递参数，效率更高。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> conn.prepareStatement(<span class="string">&quot;INSERT INTO users (username, password) VALUES (?, ?)&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">1</span>, <span class="string">&quot;user1&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, <span class="string">&quot;pass1&quot;</span>);</span><br><span class="line">pstmt.addBatch();</span><br><span class="line"></span><br><span class="line">pstmt.setString(<span class="number">1</span>, <span class="string">&quot;user2&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, <span class="string">&quot;pass2&quot;</span>);</span><br><span class="line">pstmt.addBatch();</span><br><span class="line"></span><br><span class="line">pstmt.executeBatch();</span><br></pre></td></tr></table></figure></div>

<p>而 <code>Statement</code> 每次执行时都需要重新编译 SQL 语句，批处理时效率较低。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">stmt.addBatch(<span class="string">&quot;INSERT INTO users (username, password) VALUES (&#x27;user1&#x27;, &#x27;pass1&#x27;)&quot;</span>);</span><br><span class="line">stmt.addBatch(<span class="string">&quot;INSERT INTO users (username, password) VALUES (&#x27;user2&#x27;, &#x27;pass2&#x27;)&quot;</span>);</span><br><span class="line">stmt.addBatch(<span class="string">&quot;INSERT INTO users (username, password) VALUES (&#x27;user3&#x27;, &#x27;pass3&#x27;)&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] updateCounts = stmt.executeBatch();</span><br></pre></td></tr></table></figure></div>

<h4 id="执行查询或更新"><a href="#执行查询或更新" class="headerlink" title="执行查询或更新"></a>执行查询或更新</h4><p><code>Statement</code> 或 <code>PreparedStatement</code> 执行 SQL 语句主要有 <code>executeQuery</code> 和 <code>executeUpdate</code> 两个方法。</p>
<ul>
<li><p><code>ResultSet executeQuery(String sql)</code></p>
<ul>
<li><code>executeQuery</code> 只能用于 <code>SELECT</code> 查询语句，不能用于 <code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code> 或 DDL（如 <code>CREATE TABLE</code>）语句。</li>
<li>返回 <code>ResultSet</code> 对象，用于遍历查询结果的每一行数据（通过 <code>next</code> 和 <code>getXxx</code> 方法）。</li>
</ul>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT id, name FROM users WHERE age &gt; 30&quot;</span>;</span><br><span class="line"><span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;ID: &quot;</span> + id + <span class="string">&quot;, Name: &quot;</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rs.close();</span><br><span class="line">stmt.close();</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><code>executeUpdate(String sql)</code></p>
<ul>
<li>用于执行 <strong><code>INSERT</code><strong>、</strong><code>UPDATE</code><strong>、</strong><code>DELETE</code></strong> 等更新语句，以及 <strong>DDL</strong> 语句（如 <code>CREATE TABLE</code>、<code>ALTER TABLE</code>、<code>DROP TABLE</code>）。</li>
<li>返回一个整数，表示受影响的行数（对于 DDL 语句，通常返回 <code>0</code>）。</li>
</ul>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;UPDATE users SET name = &#x27;John&#x27; WHERE id = 1&quot;</span>;</span><br><span class="line"><span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">int</span> <span class="variable">rowsAffected</span> <span class="operator">=</span> stmt.executeUpdate(sql);</span><br><span class="line">System.out.println(<span class="string">&quot;Rows affected: &quot;</span> + rowsAffected);</span><br><span class="line"></span><br><span class="line">stmt.close();</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="关闭资源"><a href="#关闭资源" class="headerlink" title="关闭资源"></a>关闭资源</h4><p>操作完成后，关闭 <code>ResultSet</code>、<code>Statement</code> 和 <code>Connection</code> 对象以释放数据库资源：</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rs.close();</span><br><span class="line">stmt.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></figure></div>

<h3 id="JDBC-高级特性"><a href="#JDBC-高级特性" class="headerlink" title="JDBC 高级特性"></a>JDBC 高级特性</h3><h4 id="事务管理"><a href="#事务管理" class="headerlink" title="事务管理"></a>事务管理</h4><p>事务（Transaction）是指一个或多个 SQL 操作的集合，这些操作要么全部成功提交（Commit），要么全部回滚（Rollback）以恢复到操作之前的状态。事务有四个关键属性，通常称为 <strong>ACID</strong> 属性：</p>
<ul>
<li><strong>Atomicity（原子性）</strong>：事务中的所有操作要么全部完成，要么全部回滚。事务不可分割。</li>
<li><strong>Consistency（一致性）</strong>：事务的执行必须使数据库从一个一致状态转换到另一个一致状态。在一致状态下，所有数据都满足数据库的完整性约束。</li>
<li><strong>Isolation（隔离性）</strong>：在事务执行过程中，其操作对其他事务是隔离的。不同事务之间不会相互干扰。</li>
<li><strong>Durability（持久性）</strong>：一旦事务提交，结果就被永久保存，即使系统崩溃也不会丢失数据。</li>
</ul>
<p> JDBC 中失误管理的基本操作步骤如下：</p>
<ol>
<li><strong>关闭自动提交</strong>：默认情况下，每个 SQL 语句在执行后都会自动提交（即自动执行 <code>COMMIT</code> 操作）。我们可以通过 <code>conn.setAutoCommit(false)</code> 来关闭自动提交模式。</li>
<li><strong>执行 SQL 操作</strong>：使用 <code>Statement</code> 或 <code>PreparedStatement</code> 对象执行一系列的 SQL 操作。</li>
<li><strong>提交事务</strong>：如果所有操作成功，通过 <code>conn.commit()</code> 提交事务。</li>
<li><strong>回滚事务</strong>：如果有任何操作失败，通过 <code>conn.rollback()</code> 回滚事务，将数据库状态恢复到事务开始之前的状态。</li>
</ol>
<p>以下是一个使用 JDBC 进行事务管理的示例：</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransactionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. 获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/mydatabase&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;password&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 2. 关闭自动提交模式</span></span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 3. 创建 Statement 对象</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 4. 执行一组 SQL 操作</span></span><br><span class="line">            stmt.executeUpdate(<span class="string">&quot;INSERT INTO accounts (account_id, balance) VALUES (1, 1000)&quot;</span>);</span><br><span class="line">            stmt.executeUpdate(<span class="string">&quot;INSERT INTO accounts (account_id, balance) VALUES (2, 2000)&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 5. 提交事务</span></span><br><span class="line">            conn.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;Transaction committed successfully.&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// 6. 发生异常时回滚事务</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                    conn.rollback();</span><br><span class="line">                    System.out.println(<span class="string">&quot;Transaction rolled back due to error: &quot;</span> + e.getMessage());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                ex.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 7. 关闭资源</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (stmt != <span class="literal">null</span>) stmt.close();</span><br><span class="line">                <span class="keyword">if</span> (conn != <span class="literal">null</span>) conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="数据源和连接池"><a href="#数据源和连接池" class="headerlink" title="数据源和连接池"></a>数据源和连接池</h4><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/cf97ab85872e4c838864c8b2682cc86c.png"
                     
                ></p>
<p>数据库连接池（Connection Pool）是个容器，负责分配、管理数据库连接（Connection）。</p>
<ul>
<li>允许应用程序重复使用一个现有的数据库连接，而不是再重新建立一个。</li>
<li>释放空闲时间超过最大空闲时间的数据库连接来避免因为没有释放数据库连接而引起的数据库连接遗漏。</li>
</ul>
<p>官方(SUN) 提供的数据库连接池标准接口 <code>DataSource</code>，由第三方组织实现此接口。我们可以通过 <code>DataSource#getConnection</code> 方法来获取 <code>Connection</code> 链接对象。</p>
<p>常见的数据库连接池：</p>
<ul>
<li>DBCP</li>
<li>C3P0</li>
<li>Druid</li>
<li>…</li>
</ul>
<h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><p><strong>MyBatis</strong> 是一款优秀的持久层框架，它支持自定义 SQL、存储过程以及高级映射。MyBatis 支持使用 XML 或注解的方式来配置 SQL 映射，这样可以让业务逻辑和数据库查询相分离，代码更加清晰。</p>
<h3 id="MyBatis-的核心组件"><a href="#MyBatis-的核心组件" class="headerlink" title="MyBatis 的核心组件"></a>MyBatis 的核心组件</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/1155eed936dc421583c0b8b18f8f7230.png"
                     
                ></p>
<h4 id="核心配置文件"><a href="#核心配置文件" class="headerlink" title="核心配置文件"></a>核心配置文件</h4><p>MyBatis 的核心配置文件（这里我们命名为 <code>mybatis-config.xml</code>）包含了对环境、数据源、别名、映射器等的定义。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> </span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 打印sql日志，value 为打印方式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 环境配置（可用于不同的开发环境，如开发、测试、生产） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        	<span class="comment">&lt;!-- 事务管理器 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 数据源配置 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mydb&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 别名配置，简化 Java 类的全路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.example.model.User&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 映射器配置，指向 Mapper XML 文件的位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/example/mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="数据库映射文件"><a href="#数据库映射文件" class="headerlink" title="数据库映射文件"></a>数据库映射文件</h4><p>映射文件（这里我们命名为 <code>Mapper.xml</code>）是用来定义 SQL 语句与 Java 对象之间的关系的，它描述了数据库操作的具体内容。</p>
<p>注意：</p>
<ul>
<li><code>#&#123;&#125;</code>：用于传递参数，防止 SQL 注入。</li>
<li><code>$&#123;&#125;</code>：用于直接拼接字符串，容易造成 SQL 注入，应谨慎使用。</li>
</ul>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> </span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 绑定到 Java 接口 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 查询用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        SELECT id, name, age</span><br><span class="line">        FROM users</span><br><span class="line">        WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 插入用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        INSERT INTO users (name, age) VALUES (#&#123;name&#125;, #&#123;age&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 更新用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        UPDATE users</span><br><span class="line">        SET name = #&#123;name&#125;, age = #&#123;age&#125;</span><br><span class="line">        WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 删除用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        DELETE FROM users WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="Java-接口（Mapper-接口）"><a href="#Java-接口（Mapper-接口）" class="headerlink" title="Java 接口（Mapper 接口）"></a>Java 接口（Mapper 接口）</h4><p>MyBatis 通过 Java 接口来进行映射，这样可以方便调用数据操作的方法，而不用直接操作 SQL。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.model.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">	<span class="comment">// 使用 XML 配置</span></span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用注解配置</span></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT id, name, age FROM users WHERE id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">getUserByIdUsingAnnotation</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>这个示例只提供查询用户方法，并实现了两种配置 SQL 映射的方式：</p>
<ul>
<li><code>getUserById</code> 使用 XML 方式配置 SQL 映射，<code>Mapper.xml</code> 中的 <code>&lt;select &gt;</code> 标签中的属性 <code>id=&quot;getUserById&quot;</code> 对应到这个方法，该标签提供了 SQL 语句的相关信息。</li>
<li><code>getUserByIdUsingAnnotation</code> 使用 注解方式配置 SQL 映射，注解中存储 SQL 语句相关信息。</li>
</ul>
<h4 id="Java-实体类（POJO）"><a href="#Java-实体类（POJO）" class="headerlink" title="Java 实体类（POJO）"></a>Java 实体类（POJO）</h4><p>实体类用于将数据库表中的记录映射到 Java 对象上。一个实体类通常是一个普通的 Java 类（POJO），用于保存数据。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getter 和 Setter 方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="MyBatis-的工作流程"><a href="#MyBatis-的工作流程" class="headerlink" title="MyBatis 的工作流程"></a>MyBatis 的工作流程</h3><div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.example.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.model.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    	<span class="comment">// MyBatis 加载核心配置文件（mybatis-config.xml），初始化环境和数据源。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(resource)) &#123;</span><br><span class="line">        	<span class="comment">// 从配置文件中读取信息，创建 SqlSessionFactory 对象。</span></span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">            <span class="comment">// 通过 `SqlSessionFactory` 创建 `SqlSession`，用于执行 SQL 操作。</span></span><br><span class="line">            <span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">            	<span class="comment">// 调用映射器接口的方法执行相应的 SQL 语句，得到查询结果。</span></span><br><span class="line">                <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">                <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.getUserById(<span class="number">1</span>); <span class="comment">// userMapper.getUserByIdUsingAnnotation(1);</span></span><br><span class="line">                System.out.println(user.getName());</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 提交事务</span></span><br><span class="line">                sqlSession.commit();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="数据库字段名与-POJO-属性名不一致"><a href="#数据库字段名与-POJO-属性名不一致" class="headerlink" title="数据库字段名与 POJO 属性名不一致"></a>数据库字段名与 POJO 属性名不一致</h3><p>在开发 MyBatis 项目的过程中，经常会遇到 <strong>数据库表的字段名和 POJO 类的属性名不一致</strong> 的情况。比如，数据库表中的列名通常遵循 <code>snake_case</code>（例如 <code>user_name</code>），而 Java 的 POJO 类中的属性名通常遵循 <code>camelCase</code>（例如 <code>userName</code>）。为了映射数据库表中的列与 Java 类中的属性，MyBatis 提供了多种解决方案。</p>
<h4 id="通过-SQL-别名来解决"><a href="#通过-SQL-别名来解决" class="headerlink" title="通过 SQL 别名来解决"></a>通过 SQL 别名来解决</h4><p>最直接的方法是<strong>在 SQL 查询中使用别名</strong>，将数据库列名的结果映射为 POJO 中对应的字段名。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    SELECT user_id AS userId, user_name AS userName, user_age AS userAge</span><br><span class="line">    FROM users</span><br><span class="line">    WHERE user_id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="使用-resultMap-进行字段映射"><a href="#使用-resultMap-进行字段映射" class="headerlink" title="使用 resultMap 进行字段映射"></a>使用 resultMap 进行字段映射</h4><p>MyBatis 提供了 <strong><code>resultMap</code></strong> 机制，能够将数据库表中的列映射到 POJO 类的属性上，解决字段名和属性名不一致的问题。</p>
<p>这里 <code>&lt;id&gt;</code> 指定主键映射，<code>&lt;result&gt;</code> 指定普通字段的映射。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_age&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userResultMap&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM users WHERE user_id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="使用-Results-和-Result-注解"><a href="#使用-Results-和-Result-注解" class="headerlink" title="使用 @Results 和 @Result 注解"></a>使用 @Results 和 @Result 注解</h4><p>如果希望将配置全部放到 Java 代码中，可以使用 MyBatis 的 <strong><code>@Results</code></strong> 注解，在接口中通过注解配置字段映射。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.model.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Result;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Results;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT user_id, user_name, user_age FROM users WHERE user_id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">        @Result(property = &quot;userId&quot;, column = &quot;user_id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(property = &quot;userName&quot;, column = &quot;user_name&quot;),</span></span><br><span class="line"><span class="meta">        @Result(property = &quot;userAge&quot;, column = &quot;user_age&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="启用驼峰命名转换"><a href="#启用驼峰命名转换" class="headerlink" title="启用驼峰命名转换"></a>启用驼峰命名转换</h4><p>可以通过在 MyBatis 配置文件中启用驼峰命名规则，这样 MyBatis 会自动将数据库列名 <code>snake_case</code> 格式转换为 Java 属性的 <code>camelCase</code> 格式。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 启用驼峰命名自动映射 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="MyBatis-的动态-SQL"><a href="#MyBatis-的动态-SQL" class="headerlink" title="MyBatis 的动态 SQL"></a>MyBatis 的动态 SQL</h3><p>MyBatis 提供了一些 XML 标签，可以用来构建动态 SQL。常用的标签有：</p>
<ul>
<li>**<code>&lt;if&gt;</code>**：条件判断，用于判断是否包含某些 SQL 片段。</li>
<li>**<code>&lt;choose&gt;</code>、<code>&lt;when&gt;</code>、<code>&lt;otherwise&gt;</code>**：类似于 Java 的 <code>switch-case</code>，用来实现多分支逻辑。</li>
<li>**<code>&lt;trim&gt;</code>、<code>&lt;where&gt;</code>、<code>&lt;set&gt;</code>**：用于拼接 SQL，消除多余的逗号或连接符。</li>
<li>**<code>&lt;foreach&gt;</code>**：用于在 SQL 中实现循环操作，常用于批量更新或插入。</li>
</ul>
<h4 id="、-标签"><a href="#、-标签" class="headerlink" title="&lt;if&gt;、&lt;where&gt; 标签"></a>&lt;if&gt;、&lt;where&gt; 标签</h4><p><strong><code>&lt;if&gt;</code> 标签</strong>用于根据条件判断是否生成某部分 SQL。常用于有条件拼接 <code>WHERE</code> 子句的场景。<code>&lt;if&gt;</code> 标签使用 <code>test</code> 属性来判断条件是否成立，只有在条件成立时，内部的 SQL 才会生成。</p>
<p><strong><code>&lt;where&gt;</code> 标签</strong>用于自动拼接 <code>WHERE</code> 子句，它会自动处理第一个条件前面的 <code>AND</code> 或 <code>OR</code>，防止 SQL 语句出错。如果没有条件，<code>&lt;where&gt;</code> 标签不会生成 <code>WHERE</code> 关键字；如果有多个条件，会自动在第一个条件前补充 <code>WHERE</code>，并处理多余的 <code>AND</code>。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUsersByConditions&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    SELECT id, name, age FROM users</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">            AND name = #&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != null&quot;</span>&gt;</span></span><br><span class="line">            AND age = #&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="、、-标签"><a href="#、、-标签" class="headerlink" title="&lt;choose&gt;、&lt;when&gt;、&lt;otherwise&gt; 标签"></a>&lt;choose&gt;、&lt;when&gt;、&lt;otherwise&gt; 标签</h4><p><strong><code>&lt;choose&gt;</code> 标签</strong>类似于 Java 中的 <code>switch-case</code>，可以用来实现多分支逻辑判断，在多条件之间选择执行某一个条件。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUsersByChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    SELECT id, name, age FROM users</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">                AND name = #&#123;name&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;age != null&quot;</span>&gt;</span></span><br><span class="line">                AND age = #&#123;age&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                AND status = &#x27;ACTIVE&#x27;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong><code>&lt;when&gt;</code> 标签</strong>表示具体的条件，如果 <code>name</code> 不为 <code>null</code>，就生成 <code>AND name = #&#123;name&#125;</code>，否则检查下一个条件。</li>
<li><strong><code>&lt;otherwise&gt;</code> 标签</strong>类似于 <code>default</code>，当所有 <code>&lt;when&gt;</code> 条件都不满足时，会执行 <code>&lt;otherwise&gt;</code> 中的内容。</li>
</ul>
<h4 id="标签"><a href="#标签" class="headerlink" title="&lt;set&gt; 标签"></a>&lt;set&gt; 标签</h4><p><strong><code>&lt;set&gt;</code> 标签</strong>用于构建动态 <code>UPDATE</code> 语句中的 <code>SET</code> 子句，它会自动处理字段之间的逗号，使生成的 SQL 语句合法。<code>&lt;set&gt;</code> 标签会自动去除最后一个字段后面的逗号，确保生成的 SQL 语法正确。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    UPDATE users</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">            name = #&#123;name&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != null&quot;</span>&gt;</span></span><br><span class="line">            age = #&#123;age&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="标签-1"><a href="#标签-1" class="headerlink" title="&lt;foreach&gt; 标签"></a>&lt;foreach&gt; 标签</h4><p><strong><code>&lt;foreach&gt;</code> 标签</strong>用于遍历集合，用于生成包含多个值的 SQL 语句，通常用于 <code>IN</code> 子句或批量插入。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUsersByIds&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    SELECT id, name, age FROM users</span><br><span class="line">    WHERE id IN</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong><code>collection</code> 属性</strong>：指定要遍历的集合名称，例如 <code>list</code>。</li>
<li><strong><code>item</code> 属性</strong>：表示每次遍历的元素，可以在 SQL 中使用。</li>
<li>**<code>open</code>、<code>separator</code>、<code>close</code>**：分别表示 <code>IN</code> 子句的开始符号 <code>(</code>、分隔符 <code>,</code>、结束符号 <code>)</code>。</li>
</ul>
<h4 id="标签-2"><a href="#标签-2" class="headerlink" title="&lt;trim&gt; 标签"></a>&lt;trim&gt; 标签</h4><p><strong><code>&lt;trim&gt;</code> 标签</strong>用于去除多余的字符，适用于需要灵活去除或者添加字符的情况，例如去掉 SQL 子句前后的 <code>AND</code>、<code>OR</code>、逗号等。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUserWithTrim&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    UPDATE users</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;SET&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">            name = #&#123;name&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != null&quot;</span>&gt;</span></span><br><span class="line">            age = #&#123;age&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong><code>prefix</code> 属性</strong>：指定前缀，比如 <code>SET</code>，表示生成 SQL 的起始部分。</li>
<li><strong><code>suffixOverrides</code> 属性</strong>：表示去除最后的符号，这里是逗号 <code>,</code>，用于保证 SQL 语句的正确性。</li>
</ul>
<h1 id="Servlet-1"><a href="#Servlet-1" class="headerlink" title="Servlet"></a>Servlet</h1><p>Servlet 是一种服务器端 Java 程序，用于处理客户端请求并生成动态响应。Servlet 由 Web 容器（如 Apache Tomcat、Jetty 等）管理，具有高效、可扩展、可移植的特点。</p>
<p>Servlet 是 JavaEE 规范之一，其实就是一个接口，将来我们需要定义 Servlet 类实现 Servlet 接口，并由 web 服务器运行 Servlet。</p>
<h2 id="Servlet-创建"><a href="#Servlet-创建" class="headerlink" title="Servlet 创建"></a>Servlet 创建</h2><h3 id="配置-pom-xml"><a href="#配置-pom-xml" class="headerlink" title="配置 pom.xml"></a>配置 pom.xml</h3><p>在 <code>pom.xml</code> 文件中添加必要的依赖项和插件配置。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Servlet API --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>这里 <code>scope</code> 选择 <code>provided</code> 是因为如果将 Servlet API 包含在最终的 WAR 文件中（默认 <code>compile</code> 范围），则会导致该依赖项被打包到 WAR 文件中，可能与 Web 服务器中已有的 Servlet API 版本冲突。使用 <code>provided</code> 范围可以避免这种情况，因为 Web 服务器会提供运行时所需的 Servlet API。</p>
<p>注意：Tomcat 9.x 支持 Servlet 4.0 及以下版本，这些版本的 Servlet API 使用 <code>javax.servlet</code> 包名。而 Tomcat 10.x 引入了对 Servlet 5.0 的支持，Servlet 5.0 开始，所有 API 都从 <code>javax.servlet</code> 迁移到 <code>jakarta.servlet</code> 命名空间。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="编写-Servlet-代码"><a href="#编写-Servlet-代码" class="headerlink" title="编写 Servlet 代码"></a>编写 Servlet 代码</h3><p>编写一个简单的 Servlet 测试代码。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorldServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello,Servlet!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="访问-Servlet"><a href="#访问-Servlet" class="headerlink" title="访问 Servlet"></a>访问 Servlet</h3><p>假设项目名为 <code>my-web-app</code>，则可以通过如下 URL 访问 Servlet 。</p>
<div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/my-web-app/hello</span><br></pre></td></tr></table></figure></div>

<p>访问 URL 后，<code>HelloWorldServlet</code> 的 <code>service</code> 方法被调用，在命令行输出信息。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/50133d5ea6854a878140e19486820a94.png"
                     
                ></p>
<h2 id="Servlet-基本概念"><a href="#Servlet-基本概念" class="headerlink" title="Servlet 基本概念"></a>Servlet 基本概念</h2><h3 id="Servlet-生命周期"><a href="#Servlet-生命周期" class="headerlink" title="Servlet 生命周期"></a>Servlet 生命周期</h3><p>Servlet 的生命周期由以下几个阶段组成：</p>
<ol>
<li><p><strong>加载和实例化</strong>：Web 容器加载 Servlet 类，并创建 Servlet 实例。这通常在 Servlet 第一次被请求时发生，或者在服务器启动时根据配置预先加载。不过可以通过设置 <code>@WebServlet</code> 注解的 <code>loadOnStartup</code> 来提前创建 <code>Servlet</code> 对象。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/demo&quot;, loadOnStartup = 1)</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>负整数：第一次被访问时创建 Servlet 对象（默认为 -1）。</li>
<li>0 或正整数：服务器启动时创建 Servlet 对象，数字越小优先级越高。</li>
</ul>
</li>
<li><p><strong>初始化</strong>：在 Servlet 实例化之后，容器调用 Servlet 的 <code>init()</code> 方法进行初始化。可以在这个方法中执行一次性的初始化任务，如读取配置文件、初始化资源等。<strong>该方法只调用一次。</strong></p>
</li>
<li><p><strong>请求处理</strong>：每次有请求到达时，容器会调用 Servlet 的 <code>service()</code> 方法来处理请求。</p>
</li>
<li><p><strong>销毁</strong>：当服务器关闭或者 Servlet 被移除时，容器会调用 Servlet 的 <code>destroy()</code> 方法进行清理工作，如关闭资源、写入日志等。在 <code>destroy()</code> 方法调用之后，容器会释放这个 Servlet 实例，该实例随后会被 Java 的垃圾收集器所回收。</p>
</li>
</ol>
<h3 id="Servlet-体系结构"><a href="#Servlet-体系结构" class="headerlink" title="Servlet 体系结构"></a>Servlet 体系结构</h3><p>Servlet 体系结构是基于一组接口和类构建的，主要包括 <code>Servlet</code> 接口、<code>GenericServlet</code> 抽象类和 <code>HttpServlet</code> 类。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/79f26dbe48274d8c8e5047d1c4fde404.png"
                     
                ></p>
<ul>
<li><code>Servlet</code>：Servlet 体系根接口</li>
<li><code>GenericServlet</code>：Servlet 抽象实现类</li>
<li><code>HttpServlet</code>：对 HTTP 协议封装的 Servlet 实现类</li>
</ul>
<p>B&#x2F;S 架构的 web 项目，都是针对 HTTP 协议，所以自定义 Servlet，会继承 <code>HttpServlet</code> 。</p>
<h2 id="Servlet-路径配置"><a href="#Servlet-路径配置" class="headerlink" title="Servlet 路径配置"></a>Servlet 路径配置</h2><p><code>urlPattern</code>（URL模式）是 Java Servlet 规范中的一个概念，用于将特定的 URL 请求映射到对应的 Servlet。在 Web 应用程序中，<code>urlPattern</code> 定义了哪些 URL 路径应该由哪个 Servlet 处理。这通常在 <code>web.xml</code> 文件中配置，或者通过 Servlet 类的 <code>@WebServlet</code> 注解进行定义。</p>
<h3 id="配置方式"><a href="#配置方式" class="headerlink" title="配置方式"></a>配置方式</h3><h4 id="WebServlet-注解"><a href="#WebServlet-注解" class="headerlink" title="@WebServlet 注解"></a>@WebServlet 注解</h4><p>Servlet 从3.0 版本开始支持使用注解配置，可以通过在 Servlet 类上使用 <code>@WebServlet</code> 注解来定义 URL 模式。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/example&quot;, &quot;/example/*&quot;, &quot;*.do&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="comment">// Servlet代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>该示例中的 <code>ExampleServlet</code> 会处理以下URL请求：</p>
<ul>
<li><code>http://localhost:8080/contextPath/example</code></li>
<li><code>http://localhost:8080/contextPath/example/foo</code></li>
<li><code>http://localhost:8080/contextPath/action.do</code></li>
</ul>
<h4 id="web-xml-配置"><a href="#web-xml-配置" class="headerlink" title="web.xml 配置"></a>web.xml 配置</h4><p>Servlet 3.0 版本前只支持 XML 配置文件的配置方法，这需要我们在 <code>web.xml</code> 中配置 Servlet 的访问路径。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="string"><span class="tag">         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;3.0&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 定义 Servlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ExampleServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.example.ExampleServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 映射 Servlet 到特定的 URL 路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ExampleServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/example<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong><code>&lt;servlet&gt;</code> 元素</strong>：<ul>
<li>**<code>&lt;servlet-name&gt;</code>**：指定 Servlet 的名称，用于唯一标识该 Servlet。这是一个逻辑名称，可以是任意字符串。</li>
<li>**<code>&lt;servlet-class&gt;</code>**：指定实现 Servlet 的 Java 类的全限定名。该类必须继承自 <code>javax.servlet.http.HttpServlet</code>（或 <code>jakarta.servlet.http.HttpServlet</code>，取决于使用的  Java EE 或 Jakarta EE 版本）。</li>
</ul>
</li>
<li><strong><code>&lt;servlet-mapping&gt;</code>元素</strong>：<ul>
<li>**<code>&lt;servlet-name&gt;</code>**：引用前面定义的 <code>&lt;servlet-name&gt;</code>，用于将 Servlet 映射到特定的 URL 路径。</li>
<li>**<code>&lt;url-pattern&gt;</code>**：指定该 Servlet 的 URL 访问路径。所有匹配此路径的请求都会由这个 Servlet 处理。</li>
</ul>
</li>
</ul>
<h3 id="匹配方式"><a href="#匹配方式" class="headerlink" title="匹配方式"></a>匹配方式</h3><h4 id="精确匹配"><a href="#精确匹配" class="headerlink" title="精确匹配"></a>精确匹配</h4><p>精确匹配指定了一个特定的 URL 路径。只有当请求的 URL 完全匹配这个路径时， Servlet 才会处理该请求。</p>
<ul>
<li><p><strong>示例</strong>：</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/myservlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>处理的URL：<code>http://localhost:8080/contextPath/myservlet</code></p>
</li>
</ul>
<h4 id="路径匹配（前缀匹配）"><a href="#路径匹配（前缀匹配）" class="headerlink" title="路径匹配（前缀匹配）"></a>路径匹配（前缀匹配）</h4><p>路径匹配使用通配符 <code>*</code> 来表示路径前缀匹配。<code>urlPattern</code> 以特定的路径开始，然后是任意的附加路径部分。</p>
<ul>
<li><p><strong>示例</strong>：</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/myapp/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>处理的URL：</p>
<ul>
<li><code>http://localhost:8080/contextPath/myapp/foo</code></li>
<li><code>http://localhost:8080/contextPath/myapp/bar</code></li>
</ul>
</li>
</ul>
<h4 id="扩展名匹配（后缀匹配）"><a href="#扩展名匹配（后缀匹配）" class="headerlink" title="扩展名匹配（后缀匹配）"></a>扩展名匹配（后缀匹配）</h4><p>扩展名匹配使用通配符 <code>*</code> 来表示扩展名匹配。<code>urlPattern</code> 可以匹配特定的文件类型。</p>
<ul>
<li><p><strong>示例</strong>：</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ImageServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.jpg<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>处理的URL：</p>
<ul>
<li><code>http://localhost:8080/contextPath/image1.jpg</code></li>
<li><code>http://localhost:8080/contextPath/photos/image2.jpg</code></li>
</ul>
</li>
</ul>
<h4 id="默认匹配"><a href="#默认匹配" class="headerlink" title="默认匹配"></a>默认匹配</h4><p>默认匹配是以 <code>/</code> 作为 <code>urlPattern</code>，它将处理所有未被其他模式匹配的请求。这通常用来作为一个兜底的匹配。</p>
<ul>
<li><p><strong>示例</strong>：</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DefaultServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>处理的URL：所有没有被其他模式处理的请求。</p>
</li>
</ul>
<h2 id="Servlet-中的域对象"><a href="#Servlet-中的域对象" class="headerlink" title="Servlet 中的域对象"></a>Servlet 中的域对象</h2><h3 id="PageContext（页面范围）-1"><a href="#PageContext（页面范围）-1" class="headerlink" title="PageContext（页面范围）"></a>PageContext（页面范围）</h3><p><code>PageContext</code> 对象是专门为 JSP 页面设计的，不能在 Servlet 中直接获取或使用。</p>
<h3 id="HttpServletRequest（请求范围）-1"><a href="#HttpServletRequest（请求范围）-1" class="headerlink" title="HttpServletRequest（请求范围）"></a>HttpServletRequest（请求范围）</h3><p><code>HttpServletRequest</code> 对象在每个请求到达 Servlet 时由 Servlet 容器自动传递给 <code>doGet()</code>、<code>doPost()</code> 等方法。因此可以使用 <code>request</code> 对象来访问请求范围的数据。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置请求范围的属性</span></span><br><span class="line">request.setAttribute(<span class="string">&quot;requestMessage&quot;</span>, <span class="string">&quot;This is a request scope message&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取请求范围的属性</span></span><br><span class="line"><span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> (String) request.getAttribute(<span class="string">&quot;requestMessage&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<h3 id="HttpSession（会话范围）-1"><a href="#HttpSession（会话范围）-1" class="headerlink" title="HttpSession（会话范围）"></a>HttpSession（会话范围）</h3><p><code>HttpSession</code> 对象可以通过 <code>HttpServletRequest</code> 对象的 <code>getSession()</code> 方法获取。如果会话不存在，<code>getSession()</code> 方法会自动创建一个新的会话。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取当前会话，如果没有会话则创建一个新的会话</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置会话范围的属性</span></span><br><span class="line">session.setAttribute(<span class="string">&quot;sessionMessage&quot;</span>, <span class="string">&quot;This is a session scope message&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取会话范围的属性</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sessionMessage</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;sessionMessage&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<p><strong>特有方法</strong>：</p>
<ul>
<li>**<code>invalidate()</code>**：使会话无效并销毁所有会话数据。</li>
</ul>
<h3 id="ServletContext（应用范围）-1"><a href="#ServletContext（应用范围）-1" class="headerlink" title="ServletContext（应用范围）"></a>ServletContext（应用范围）</h3><p><code>ServletContext</code> 对象表示整个 Web 应用的上下文。它可以通过 <code>HttpServletRequest</code> 对象的 <code>getServletContext()</code> 方法或直接通过 <code>HttpServlet</code> 类的 <code>getServletContext()</code> 方法获取。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取ServletContext对象</span></span><br><span class="line"><span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> getServletContext();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置应用范围的属性</span></span><br><span class="line">context.setAttribute(<span class="string">&quot;appMessage&quot;</span>, <span class="string">&quot;This is an application scope message&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取应用范围的属性</span></span><br><span class="line"><span class="type">String</span> <span class="variable">appMessage</span> <span class="operator">=</span> (String) context.getAttribute(<span class="string">&quot;appMessage&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<p><strong>特有方法</strong>：</p>
<ul>
<li>**<code>getInitParameter(String name)</code>**：获取应用的初始化参数（在 <code>web.xml</code> 中配置）。</li>
</ul>
<h2 id="请求响应对象"><a href="#请求响应对象" class="headerlink" title="请求响应对象"></a>请求响应对象</h2><p>Web 服务器收到客户端的 http 请求，会针对每一次请求，分别创建一个用于代表请求的 <code>request</code> 对象、和代表响应的 <code>response</code> 对象。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/7924199b59cf4c0783db1c8064d7633a.png"
                     
                ></p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/requestInfo/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestInfoServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 处理请求参数的编码 post 请求处理</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="request-对象"><a href="#request-对象" class="headerlink" title="request 对象"></a>request 对象</h3><p><code>HttpServletRequest</code> 对象代表客户端的请求，当客户端通过 HTTP 协议访问服务器时，HTTP 请求头中的所有信息都封装在这个对象中。</p>
<p><code>request</code> 对象获取客户端的请求数据，接口 <code>ServletRequest</code>，子接口 <code>HttpServletRequest</code> 继承 <code>ServletRequest</code> 。<code>HttpServletRequest</code> 接口的实现类是 Tomcat 引擎提供.</p>
<h4 id="获取请求行信息"><a href="#获取请求行信息" class="headerlink" title="获取请求行信息"></a>获取请求行信息</h4><p>假设 Web 应用的上下文路径为 <code>/contextPath</code>，当访问 <code>http://localhost:8080/contextPath/requestInfo/some/path?name=John&amp;age=30</code> 时：<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/b2371be1cf334219bfdeed871f24cbe7.png"
                     
                ></p>
<ul>
<li><code>request.getMethod()</code>：返回请求的 HTTP 方法（如 <code>GET</code>、<code>POST</code>）。</li>
<li><code>request.getRequestURI()</code>：返回请求的 URI 部分，不包含查询字符串和协议头</li>
<li><code>request.getRequestURL()</code>：返回完整的请求 URL，包括协议（http&#x2F;https）、服务器名称、端口号和请求路径。</li>
<li><code>request.getRemoteAddr()</code>：返回用户的 IP。</li>
<li><code>request.getQueryString()</code>：返回 URL 中的查询字符串部分，如果没有查询字符串，则返回 <code>null</code>。</li>
<li><code>request.getProtocol()</code>：返回 HTTP 协议版本，例如 <code>HTTP/1.1</code>。</li>
<li><code>request.getContextPath()</code>：返回 Web 应用程序的上下文路径。</li>
<li><code>request.getServletPath()</code>：返回与 Servlet 映射的路径部分，即去除上下文路径后的部分。</li>
<li><code>request.getPathInfo()</code>：返回请求路径中 Servlet 路径之后的部分，通常用于 RESTful 路径参数解析。</li>
</ul>
<h4 id="获取请求头信息"><a href="#获取请求头信息" class="headerlink" title="获取请求头信息"></a>获取请求头信息</h4><p>HTTP 请求头包含了客户端浏览器发送给服务器的额外信息，如用户代理、接受的内容类型、Cookie 等。这些信息以键值对的形式表示。</p>
<p>我们可以使用 <code>getHeader</code> 函数获取请求头信息，其中 <code>name</code> 为键的字符串形式。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getHeader</span><span class="params">(String name)</span></span><br></pre></td></tr></table></figure></div>

<p>另外获取请求头信息还有 <code>request.getHeaders(String name)</code>，<code>request.getHeaderNames()</code> 等方法，这里不做介绍。</p>
<h4 id="获取请求参数"><a href="#获取请求参数" class="headerlink" title="获取请求参数"></a>获取请求参数</h4><p>在 Java Servlet 中，HttpServletRequest 对象提供了多种方法来获取请求参数。请求参数通常是通过 URL 的查询字符串或通过表单提交的数据传递给服务器的。</p>
<ul>
<li><p><code>getParameter(String name)</code>：返回请求中指定名称的单个参数值。如果参数不存在，返回 <code>null</code>。</p>
</li>
<li><p><code>getParameterValues(String name)</code>：返回请求中指定名称的所有参数值，作为一个字符串数组。如果参数不存在，返回null。通常用于处理同一个名称有多个值的情况，例如复选框或多选列表。</p>
</li>
<li><p><code>getParameterMap()</code>：返回一个包含所有参数名和参数值的 <code>Map&lt;String, String[]&gt;</code>。参数名作为键，参数值作为字符串数组。如果一个参数有多个值，它们都包含在数组中。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, String[]&gt; entry : parameterMap.entrySet()) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">paramName</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">    String[] paramValues = entry.getValue();</span><br><span class="line">    <span class="comment">// 处理参数名及其对应的值数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="reponse-对象"><a href="#reponse-对象" class="headerlink" title="reponse 对象"></a>reponse 对象</h3><p>response 对象负责把服务器对请求的处理结果告知客户端。在 B&#x2F;S 架构中，响应就是把结果带回浏览器。 </p>
<p>Servlet 中使用的 <code>ServletResponse</code> 接口，而我们使用的是 <code>ServletResponse</code> 的子接口 <code>HttpServletResponse</code>，它继承自 <code>ServletResponse</code>，是与 HTTP 协议相关的 Response 响应对象。</p>
<p>我们使用的子接口 <code>HttpServletResponse</code>，此接口对象由 Tomcat 引擎提供。</p>
<h4 id="相关方法"><a href="#相关方法" class="headerlink" title="相关方法"></a>相关方法</h4><ul>
<li><p>设置响应行：使用 <code>HttpServletResponse</code> 的 <code>setStatus(int sc)</code> 方法可以设置 HTTP 响应的状态码。</p>
</li>
<li><p>设置响应头：响应头信息以键值对的形式表示，主要通过 <code>setHeader</code> 方法设置。</p>
</li>
<li><p>设置响应体</p>
<ul>
<li><p><code>response.getWriter()</code>：返回一个 <code>PrintWriter</code> 对象，用于向客户端输出字符数据（如文本、HTML、JSON 等）。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">out.println(<span class="string">&quot;&lt;html&gt;&lt;body&gt;&quot;</span>);</span><br><span class="line">out.println(<span class="string">&quot;&lt;h2&gt;Welcome to the Servlet!&lt;/h2&gt;&quot;</span>);</span><br><span class="line">out.println(<span class="string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><code>response.getOutputStream()</code>：返回一个 <code>ServletOutputStream</code> 对象，用于向客户端输出二进制数据（如图像、PDF、Excel 文件等）。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;application/pdf&quot;</span>);</span><br><span class="line"><span class="type">ServletOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line"><span class="comment">// 示例：假设我们已经有一个字节数组代表PDF内容</span></span><br><span class="line"><span class="type">byte</span>[] pdfContent = ...;</span><br><span class="line">out.write(pdfContent);</span><br><span class="line">out.flush();</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
</ul>
<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><p>HTTP 重定向是一种常见的 Web 机制，用于告诉客户端（如浏览器）应该请求另一个 URL。当服务器响应一个请求并决定进行重定向时，会发送一个包含重定向指令的响应，客户端接收到这个指令后，会自动发起新的请求到指定的 URL。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/d9fe48c5121747cea81fa891eeb1cc69.png"
                     
                ><br>我们可以通过手动设置响应字段来实现重定向。这种方式主要涉及设置 HTTP 状态码和 <code>Location</code> 头字段。</p>
<ul>
<li>设置状态码为 302：302 状态码表示“Found”，是 HTTP 重定向的标准状态码。</li>
<li>设置 Location 头字段：Location 头字段指示客户端应该重定向到的 URL。</li>
</ul>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置响应状态码为302重定向</span></span><br><span class="line">response.setStatus(HttpServletResponse.SC_FOUND); <span class="comment">// 或者 response.setStatus(302);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置Location头字段为重定向目标URL</span></span><br><span class="line">response.setHeader(<span class="string">&quot;Location&quot;</span>, <span class="string">&quot;http://example.com&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<p>另外我们可以通过 <code>HttpServletResponse</code> 对象的 <code>sendRedirect</code> 方法实现重定向。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重定向到一个名为 /thankYou 的 Servlet 或 JSP 页面</span></span><br><span class="line">response.sendRedirect(request.getContextPath() + <span class="string">&quot;/thankYou&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="请求转发"><a href="#请求转发" class="headerlink" title="请求转发"></a>请求转发</h4><p>请求转发（Request Forwarding）是 Java Servlet 中的一种机制，用于在服务器内部将请求从一个 Servlet 或 JSP 转发到另一个 Servlet、JSP 或静态资源（如 HTML 文件）。与重定向不同，请求转发不会改变客户端浏览器的 URL，也不会产生新的 HTTP 请求。整个过程在服务器内部完成，对客户端是透明的。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/939caf0a091b44b0b3c9ba787dca5c8f.png"
                     
                ><br>在 Java Servlet 中，可以使用 <code>RequestDispatcher</code> 对象来实现请求转发。<code>RequestDispatcher</code> 对象可以通过 <code>HttpServletRequest</code> 的 <code>getRequestDispatcher()</code> 方法获取。</p>
<ul>
<li>获取 <code>RequestDispatcher</code> 对象：通过 <code>HttpServletRequest</code> 对象获取需要转发的目标资源的 <code>RequestDispatcher</code> 对象。</li>
<li>调用 <code>forward</code> 方法：调用 <code>RequestDispatcher</code> 对象的 <code>forward()</code> 方法，将请求转发到目标资源。</li>
</ul>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取RequestDispatcher对象</span></span><br><span class="line"><span class="type">RequestDispatcher</span> <span class="variable">dispatcher</span> <span class="operator">=</span> request.getRequestDispatcher(<span class="string">&quot;/targetForward&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 转发请求到另一个Servlet</span></span><br><span class="line">dispatcher.forward(request, response);</span><br></pre></td></tr></table></figure></div>

<p>在请求转发资源间可以使用 <code>request</code> 对象共享数据：</p>
<ul>
<li><code>setAttribute(String name, Object value)</code>：以键值对形式存储数据到 request 域中。</li>
<li><code>getAttribute(String name)</code>：获取指定名称的属性值。</li>
<li><code>removeAttribute(String name)</code>：删除键值对。</li>
</ul>
<p>相较于重定向，请求转发有如下特点：</p>
<ul>
<li>浏览器地址栏路径不发生变化。</li>
<li>只能转发到当前服务器的内部资源。</li>
<li>一次请求，可以在转发的资源间使用 <code>request</code> 共享数据。</li>
</ul>
<h2 id="会话跟踪技术"><a href="#会话跟踪技术" class="headerlink" title="会话跟踪技术"></a>会话跟踪技术</h2><h3 id="会话跟踪技术概述"><a href="#会话跟踪技术概述" class="headerlink" title="会话跟踪技术概述"></a>会话跟踪技术概述</h3><h4 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h4><p>用户打开浏览器，访问 web 服务器的资源，会话建立，直到有一方断开连接，会话结束。在一次会话中可以包含<strong>多次</strong>请求和响应。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/cf9d984c6c7f4ee7a3cab15f598aaab8.png"
                     
                ></p>
<ul>
<li>从浏览器发出请求到服务端响应数据给前端之后，一次会话（在浏览器和服务器之间）就被建立了。</li>
<li>会话被建立后，如果浏览器或服务端都没有被关闭，则会话就会持续建立着。</li>
<li>浏览器和服务器就可以继续使用该会话进行请求发送和响应，上述的整个过程就被称之为<strong>会话</strong>。</li>
</ul>
<h4 id="会话跟踪"><a href="#会话跟踪" class="headerlink" title="会话跟踪"></a>会话跟踪</h4><p>会话跟踪（Session Tracking Techniques）一种维护浏览器状态的方法，服务器需要识别多次请求是否来自于同一浏览器，以便在同一次会话的多次请求间<strong>共享数据</strong>。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/095c1cbe0c974698906c47b21305c971.png"
                     
                ></p>
<ul>
<li>服务器会收到多个请求，这多个请求可能来自多个浏览器，如上图中的 6 个请求来自 3 个浏览器</li>
<li>服务器需要用来识别请求是否来自同一个浏览器</li>
<li>服务器用来识别浏览器的过程，这个过程就是<strong>会话跟踪</strong>。</li>
<li>服务器识别浏览器后就可以在同一个会话中多次请求之间来共享数据</li>
</ul>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Cookie 是<strong>客户端</strong>会话技术，将数据保存到客户端，以后每次请求都携带 Cookie 数据进行访问。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/589d4f47571b44879788212c5a75441a.png"
                     
                ></p>
<h4 id="Cookie-的基本使用"><a href="#Cookie-的基本使用" class="headerlink" title="Cookie 的基本使用"></a>Cookie 的基本使用</h4><ul>
<li><p>发送 Cookie</p>
<ul>
<li><p>创建 Cookie 对象，并设置数据。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>设置 Cookie 存活时间（如果不设置，默认存活时间为当前会话）。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">7</span>);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>使用 <code>response</code> 对象发送 Cookie 到客户端。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p>获取 Cookie</p>
<ul>
<li><p>使用 <code>request</code> 对象获取客户端携带的所有 Cookie。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie[] cookies = request.getCookies();</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>遍历数组，获取每一个 Cookie 对象。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检查是否有Cookie</span></span><br><span class="line"><span class="keyword">if</span> (cookies != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">        <span class="comment">// 获取每个Cookie的名称和值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 在响应中显示Cookie信息</span></span><br><span class="line">        response.getWriter().println(<span class="string">&quot;&lt;p&gt;Cookie Name: &quot;</span> + name + <span class="string">&quot;&lt;/p&gt;&quot;</span>);</span><br><span class="line">        response.getWriter().println(<span class="string">&quot;&lt;p&gt;Cookie Value: &quot;</span> + value + <span class="string">&quot;&lt;/p&gt;&quot;</span>);</span><br><span class="line">        response.getWriter().println(<span class="string">&quot;&lt;hr&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    response.getWriter().println(<span class="string">&quot;&lt;p&gt;No cookies found.&lt;/p&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
</ul>
<h4 id="Cookie-的原理分析"><a href="#Cookie-的原理分析" class="headerlink" title="Cookie 的原理分析"></a>Cookie 的原理分析</h4><p>Cookie 的实现原理是基于 HTTP 协议的，其中涉及到 HTTP 协议中的两个请求头信息：</p>
<ul>
<li>响应头：<code>set-cookie</code></li>
<li>请求头：<code>cookie</code></li>
</ul>
<p>例如下面这会话包含次请求&#x2F;响应：<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/eab6808b234a4c5b9eb888f7ab7cc89d.png"
                     
                ></p>
<ul>
<li>在响应 1 中，当 Tomcat 发现后端要返回的是一个 Cookie 对象之后，Tomcat 就会在响应头中添加一行数据 <code>Set-Cookie:username=sky</code>。</li>
<li>浏览器获取到响应结果后，从响应头中就可以获取到 <code>Set-Cookie</code> 对应值 <code>username=sky</code>，并将数据存储在浏览器的内存中。</li>
<li>浏览器发送请求 2 的时候，浏览器会自动在请求头中添加 <code>Cookie: username=sky</code>。</li>
</ul>
<h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><p>Session 是<strong>服务端</strong>会话跟踪技术，将数据保存到服务端。（可以理解为与 Cookie 效果相同，只不过数据存储在服务端。）</p>
<h4 id="Session-的基本使用"><a href="#Session-的基本使用" class="headerlink" title="Session 的基本使用"></a>Session 的基本使用</h4><p>在 JavaEE 中提供了 <code>HttpSession</code> 接口，来实现一次会话的多次请求之间数据共享功能。具体可以参考前面 Servlet 中的域对象的 <code>HttpSession</code> 部分。</p>
<h4 id="Session-的原理分析"><a href="#Session-的原理分析" class="headerlink" title="Session 的原理分析"></a>Session 的原理分析</h4><p>由于 Session 和 Cookie 一样也要区分和记录会话，且 HTTP 是无状态的协议，因此 Session 也是基于 Cookie 来实现的，只不过这个过程对用户透明。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/94ed9ba03a254e8ca8296067e00e0214.png"
                     
                ></p>
<ul>
<li>在第一次获取 session 对象的时候，session 对象会有一个唯一的标识，假如是 <code>id:10</code>。</li>
<li>在 session 中存入其他数据并处理完成所有业务后，需要通过 Tomcat 服务器响应结果给浏览器。</li>
<li>Tomcat 服务器发现业务处理中使用了 session 对象，就会把 session 的唯一标识 <code>id:10</code> 当做一个 cookie，添加 <code>Set-Cookie:JESSIONID=10</code> 到响应头中，并响应给浏览器。</li>
<li>浏览器接收到响应结果后，会把响应头中的 coookie 数据存储到浏览器的内存中。</li>
<li>浏览器在同一会话中再次发生请求时，会把 cookie 中的数据按照 <code>cookie: JESSIONID=10</code> 的格式添加到请求头中并发送给服务器 Tomcat 。</li>
<li>Servlet 获取到请求后，从请求头中就读取 cookie 中的 JSESSIONID 值为 10，然后就会到服务器内存中寻找 <code>id:10</code> 的 session 对象，如果找到了，就直接返回该对象，如果没有则新创建一个 session 对象。</li>
</ul>
<p>因此 session 本质就是把数据存储在服务端，而客户端只存数据的句柄，客户端凭句柄找到服务器中对应的数据，并且客户端自始至终都得不到 session 中存储的数据。</p>
<h1 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h1><ul>
<li>Filter 表示过滤器，是 JavaWeb 三大组件(Servlet、Filter、Listener)之一。</li>
<li>过滤器可以把对资源的请求拦截下来，从而实现一些特殊的功能。</li>
<li>过滤器一般完成一些通用的操作，比如：权限控制、统一编码处理、敏感字符处理等等…<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/93c73c47ae3040ad92aceacf3977ba3f.png"
                     
                ></li>
</ul>
<h2 id="Filter-生命周期"><a href="#Filter-生命周期" class="headerlink" title="Filter 生命周期"></a>Filter 生命周期</h2><div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebFilter(&quot;/exampleServlet&quot;)</span> <span class="comment">// 指定拦截的URL模式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">// 初始化操作（如读取Filter配置参数）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ExampleFilter initialized&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在请求处理之前的操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Before processing request in ExampleFilter&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 继续将请求传递给下一个过滤器或目标Servlet</span></span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在响应处理之后的操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;After processing request in ExampleFilter&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 释放资源的操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ExampleFilter destroyed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>Filter 的生命周期由 Servlet 容器管理，主要包括以下三个阶段：</p>
<ol>
<li><strong>初始化（init）</strong>：<ul>
<li>当Servlet容器启动或第一次处理与 Filter 关联的请求时，调用 Filter 的 <code>init()</code> 方法。开发者可以在 <code>init()</code> 方法中执行初始化操作，如读取配置参数。</li>
</ul>
</li>
<li><strong>过滤（doFilter）</strong>：<ul>
<li>每次请求与 Filter 匹配时，容器会调用 <code>doFilter()</code> 方法。该方法接收三个参数：<code>ServletRequest</code>、<code>ServletResponse</code>、<code>FilterChain</code>。</li>
<li>开发者可以在 <code>doFilter()</code> 方法中对请求和响应进行处理，还可以决定是否将请求继续传递给下一个 Filter 或最终的 Servlet。</li>
</ul>
</li>
<li><strong>销毁（destroy）</strong>：<ul>
<li>当 Servlet 容器销毁 Filter 时，调用 <code>destroy()</code> 方法。开发者可以在此方法中释放资源。</li>
</ul>
</li>
</ol>
<h2 id="配置-Filter"><a href="#配置-Filter" class="headerlink" title="配置 Filter"></a>配置 Filter</h2><p>Filter 可以通过两种方式配置：注解方式和 <code>web.xml</code> 文件配置方式。</p>
<p><strong>1. 使用注解配置</strong>：</p>
<p>在 Java EE 6 及以上版本，可以使用 <code>@WebFilter</code> 注解直接配置 Filter。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(urlPatterns = &#123;&quot;/exampleServlet&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="comment">// 实现Filter接口的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>**<code>urlPatterns</code>**：指定 Filter 拦截的 URL 模式，支持通配符。</li>
</ul>
<p><strong>2. 在<code>web.xml</code> 中配置</strong>：</p>
<p>在 <code>web.xml</code> 文件中手动配置 Filter，并指定拦截的 URL 模式。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ExampleFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.example.ExampleFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ExampleFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/exampleServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>**<code>&lt;filter&gt;</code>**：定义 Filter 的名称和实现类。</li>
<li>**<code>&lt;filter-mapping&gt;</code>**：定义 Filter 与 URL 模式之间的映射关系。</li>
</ul>
<h2 id="Filter-的常见应用场景"><a href="#Filter-的常见应用场景" class="headerlink" title="Filter 的常见应用场景"></a>Filter 的常见应用场景</h2><h3 id="日志记录"><a href="#日志记录" class="headerlink" title="日志记录"></a>日志记录</h3><p>Filter 可以用于记录请求的详细信息，如请求的 URL、客户端 IP 地址、请求参数等。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span><br><span class="line">        <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">req</span> <span class="operator">=</span> (HttpServletRequest) request;</span><br><span class="line">    System.out.println(<span class="string">&quot;Request URI: &quot;</span> + req.getRequestURI());</span><br><span class="line">    </span><br><span class="line">    chain.doFilter(request, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="用户认证与授权"><a href="#用户认证与授权" class="headerlink" title="用户认证与授权"></a>用户认证与授权</h3><p>Filter 可以用于检查用户的登录状态或访问权限，如果用户未登录或无权限访问，可以重定向到登录页面或显示错误信息。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span><br><span class="line">        <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">req</span> <span class="operator">=</span> (HttpServletRequest) request;</span><br><span class="line">    <span class="type">HttpServletResponse</span> <span class="variable">res</span> <span class="operator">=</span> (HttpServletResponse) response;</span><br><span class="line"></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">false</span>);</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">loggedIn</span> <span class="operator">=</span> (session != <span class="literal">null</span> &amp;&amp; session.getAttribute(<span class="string">&quot;user&quot;</span>) != <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (loggedIn) &#123;</span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.sendRedirect(req.getContextPath() + <span class="string">&quot;/login.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="请求和响应的字符编码设置"><a href="#请求和响应的字符编码设置" class="headerlink" title="请求和响应的字符编码设置"></a>请求和响应的字符编码设置</h3><p>Filter 可以用于设置请求和响应的字符编码，确保处理过程中不会出现乱码。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span><br><span class="line">        <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">    request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    chain.doFilter(request, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="响应压缩"><a href="#响应压缩" class="headerlink" title="响应压缩"></a>响应压缩</h3><p>Filter 可以用于对响应内容进行压缩，以减少传输数据量，提高页面加载速度。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span><br><span class="line">        <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">HttpServletResponse</span> <span class="variable">httpResponse</span> <span class="operator">=</span> (HttpServletResponse) response;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置压缩标头</span></span><br><span class="line">    httpResponse.setHeader(<span class="string">&quot;Content-Encoding&quot;</span>, <span class="string">&quot;gzip&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用压缩输出流</span></span><br><span class="line">    <span class="type">GZIPOutputStream</span> <span class="variable">gzipOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GZIPOutputStream</span>(httpResponse.getOutputStream());</span><br><span class="line">    <span class="type">HttpServletResponseWrapper</span> <span class="variable">wrappedResponse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpServletResponseWrapper</span>(httpResponse) &#123;</span><br><span class="line">        <span class="keyword">public</span> ServletOutputStream <span class="title function_">getOutputStream</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ServletOutputStream</span>() &#123;</span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">int</span> b)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                    gzipOutputStream.write(b);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">flush</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                    gzipOutputStream.flush();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                    gzipOutputStream.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    chain.doFilter(request, wrappedResponse);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Filter-Chain（过滤器链）"><a href="#Filter-Chain（过滤器链）" class="headerlink" title="Filter Chain（过滤器链）"></a>Filter Chain（过滤器链）</h2><p>当有多个 Filter 配置时，请求会依次通过这些 Filter，这些 Filter 形成一个链条，称为<strong>过滤器链（Filter Chain）</strong>。</p>
<p>每个 Filter 在处理完请求后，可以选择将请求传递给链中的下一个 Filter 或目标 Servlet。如果一个 Filter 没有调用 <code>chain.doFilter()</code> 方法，则请求不会继续传递，而是直接终止在该 Filter 中。<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/383b87be8a4f4e109ff4e9daa4bca05c.png"
                     
                ></p>
<p>关于 Filter 的执行顺序：</p>
<ul>
<li><strong>在 web.xml 中配置的 Filter</strong>：过滤器在<code>web.xml</code>中声明的顺序（<code>&lt;filter-mapping&gt;</code>）决定了它们在过滤器链中的执行顺序。先声明的过滤器会先执行。</li>
<li><strong>使用 @WebFilter 注解配置的 Filter</strong>：如果所有过滤器都使用注解配置，那么它们的执行顺序取决于容器的处理顺序，通常是按照类加载的顺序。某些框架或容器支持通过注解中的 <code>order</code> 属性来指定顺序。</li>
</ul>
<h1 id="Listener"><a href="#Listener" class="headerlink" title="Listener"></a>Listener</h1><p>在Java Web应用中，<strong>Listener</strong>（监听器）是用于监听和响应特定事件的组件。Listener可以监听Web应用程序、会话、请求的生命周期事件，以及属性的变化。当这些事件发生时，Listener可以执行相应的操作，例如初始化资源、清理资源、记录日志等。</p>
<h2 id="Listener-的类型"><a href="#Listener-的类型" class="headerlink" title="Listener 的类型"></a>Listener 的类型</h2><p>Java Web 中的 Listener 主要分为以下几类：</p>
<table>
<thead>
<tr>
<th align="left">监听器分类</th>
<th align="left">监听器名称</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>ServletContext 监听</strong></td>
<td align="left">ServletContextListener</td>
<td align="left">用于对 ServletContext 对象进行监听（创建、销毁）</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">ServletContextAttributeListener</td>
<td align="left">对 ServletContext 对象中属性的监听（增删改属性）</td>
</tr>
<tr>
<td align="left"><strong>Session 监听</strong></td>
<td align="left">HttpSessionListener</td>
<td align="left">对 Session 对象的整体状态的监听（创建、销毁）</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">HttpSessionAttributeListener</td>
<td align="left">对 Session 对象中的属性监听（增删改属性）</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">HttpSessionBindingListener</td>
<td align="left">监听对象于 Session 中的绑定和解除</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">HttpSessionActivationListener</td>
<td align="left">对 Session 数据的钝化和活化的监听</td>
</tr>
<tr>
<td align="left"><strong>Request 监听</strong></td>
<td align="left">ServletRequestListener</td>
<td align="left">对 Request 对象进行监听（创建、销毁）</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">ServletRequestAttributeListener</td>
<td align="left">对 Request 对象中属性的监听（增删改属性）</td>
</tr>
</tbody></table>
<p>每一种监听器都会提供一些接口共用户实现来实现特定的监听功能，以 <code>HttpSessionListener</code> 为例，该监听器用于监听用户会话的创建和销毁事件，常用于统计在线用户数、管理会话相关资源等。</p>
<p><strong>接口方法</strong>：</p>
<ul>
<li><code>sessionCreated(HttpSessionEvent se)</code>：当HttpSession被创建时调用。</li>
<li><code>sessionDestroyed(HttpSessionEvent se)</code>：当HttpSession被销毁时调用。</li>
</ul>
<p><strong>示例</strong>：</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHttpSessionListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="comment">// 会话创建时的操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;会话创建：&quot;</span> + se.getSession().getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="comment">// 会话销毁时的操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;会话销毁：&quot;</span> + se.getSession().getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Listener-的配置"><a href="#Listener-的配置" class="headerlink" title="Listener 的配置"></a>Listener 的配置</h2><h3 id="使用注解配置"><a href="#使用注解配置" class="headerlink" title="使用注解配置"></a>使用注解配置</h3><p>Listener可以通过<code>@WebListener</code>注解来声明，注解配置方式简单、直观。</p>
<div class="code-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServletContextListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">    <span class="comment">// 实现接口方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="在-web-xml-中配置"><a href="#在-web-xml-中配置" class="headerlink" title="在 web.xml 中配置"></a>在 web.xml 中配置</h3><p>Listener 也可以在 <code>web.xml</code> 中配置，适用于更传统的配置方式。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.example.MyServletContextListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="Listener的使用场景"><a href="#Listener的使用场景" class="headerlink" title="Listener的使用场景"></a>Listener的使用场景</h2><ul>
<li><strong>资源管理</strong>：在应用启动时初始化资源（如数据库连接池），在应用关闭时释放资源。</li>
<li><strong>会话管理</strong>：监控和管理用户会话，统计在线用户数，记录用户会话日志等。</li>
<li><strong>请求监控</strong>：记录请求日志，分析请求流量，监控请求生命周期。</li>
<li><strong>属性监控</strong>：监控应用范围、会话范围或请求范围属性的变化，触发相应的业务逻辑。</li>
</ul>
<h1 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h1><p>JSP（JavaServer Pages）是Java EE（Jakarta EE）技术的一部分，用于创建动态 Web 内容。JSP 页面以 HTML、XML 等标记语言为基础，并嵌入了 Java 代码。JSP 是 Java Servlet 技术的一种扩展，它使得开发者可以更方便地创建动态 Web 页面。</p>
<p>在 Java Web 项目使用 JSP 需要在 <code>pom.xml</code> 文件中添加必要的依赖项和插件配置。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="JSP-原理"><a href="#JSP-原理" class="headerlink" title="JSP 原理"></a>JSP 原理</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2024/11/11/Java%20Web%20%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/images/de08ad99805c459994c886900fb97826.png"
                     
                ></p>
<ul>
<li><strong>请求JSP页面</strong>：客户端（通常是浏览器）发送一个 HTTP 请求，要求访问某个 JSP 页面。</li>
<li><strong>JSP编译</strong>：如果 JSP 页面是首次请求或 JSP 页面发生了变化，Web 服务器将其编译为 Java Servlet 类。</li>
<li><strong>JSP执行</strong>：生成的 Servlet 类由 Servlet 容器执行，Java 代码在服务器端运行，并生成动态内容。</li>
<li><strong>响应返回</strong>：生成的动态内容（通常是 HTML）作为 HTTP 响应返回给客户端。</li>
</ul>
<h2 id="JSP-基本语法"><a href="#JSP-基本语法" class="headerlink" title="JSP 基本语法"></a>JSP 基本语法</h2><div class="code-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello jsp<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;%</span><br><span class="line">        System.out.println(&quot;hello,jsp~&quot;);</span><br><span class="line">    %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="JSP-脚本元素"><a href="#JSP-脚本元素" class="headerlink" title="JSP 脚本元素"></a>JSP 脚本元素</h3><ul>
<li><p><strong>脚本片段（Scriptlet）</strong>：用 <code>&lt;% ... %&gt;</code> 括起来的 Java 代码片段，它们在服务器端执行。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;John Doe&quot;</span>;</span><br><span class="line">    out.println(<span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>声明（Declaration）</strong>：用 <code>&lt;%! ... %&gt;</code> 括起来的 Java 声明。这些声明中的变量和方法可以在整个 JSP 页面中使用。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCounter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> counter++;</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>表达式（Expression）</strong>：用 <code>&lt;%= ... %&gt;</code> 括起来的 Java 表达式，它们的值会被计算并插入到页面中。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;The current count is: &lt;%= getCounter() %&gt;&lt;/h2&gt;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="JSP-指令"><a href="#JSP-指令" class="headerlink" title="JSP 指令"></a>JSP 指令</h3><ul>
<li><p><strong>page指令</strong>：配置 JSP 页面的全局属性，如 <code>contentType</code>、<code>import</code> 等。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>include指令</strong>：在编译时包含另一个文件的内容。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">&quot;header.jsp&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h2 id="EL-表达式和域对象"><a href="#EL-表达式和域对象" class="headerlink" title="EL 表达式和域对象"></a>EL 表达式和域对象</h2><p>Expression Language 表达式语言，用于简化  JSP 页面内的 Java 代码。EL 通常用 <code>$&#123;&#125;</code> 表示，主要用来获取数据。EL 表达式的主要作用就是省略掉 <code>getAttribute</code> 方法。</p>
<p>从四种域对象中获取指定属性的时候可以指定域对象的范围，<strong>注意这里的域对象的表示</strong>。如果不指定域对象则按照就近原则获取。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;$&#123;pageScope.message&#125;&lt;/p&gt;         &lt;!-- 从 pageScope（页面范围）中获取属性 message --&gt;</span><br><span class="line">&lt;p&gt;$&#123;requestScope.username&#125;&lt;/p&gt;     &lt;!-- 从 requestScope（请求范围）中获取属性 username --&gt;</span><br><span class="line">&lt;p&gt;$&#123;sessionScope.user&#125;&lt;/p&gt;         &lt;!-- 从 sessionScope（会话范围）中获取属性 user --&gt;</span><br><span class="line">&lt;p&gt;$&#123;applicationScope.config&#125;&lt;/p&gt;   &lt;!-- 从 applicationScope（应用范围）中获取属性 config --&gt;</span><br></pre></td></tr></table></figure></div>

<p>其中 <code>pageScope</code> 仅在页面有效，因此属性设置也是在页面中设置。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- 设置 pageScope 属性 --%&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;message&quot;</span> value=<span class="string">&quot;This is a page scope message&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;%-- 访问 pageScope 属性 --%&gt;</span><br><span class="line">&lt;p&gt;$&#123;pageScope.message&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure></div>

<h2 id="JSTL-标签"><a href="#JSTL-标签" class="headerlink" title="JSTL 标签"></a>JSTL 标签</h2><p>JSP 标准标签库(Jsp Standarded Tag Library) ，使用标签取代 JSP 页面上的 Java 代码。</p>
<p>要想使用 JSTL 标签，首先要在 <code>pom.xml</code> 中导入依赖。</p>
<div class="code-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>然后在 JSP 页面上引入 JSTL 标签库。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt; </span><br></pre></td></tr></table></figure></div>

<p>JSTL 标签示例代码如下，不做过多介绍。</p>
<div class="code-container" data-rel="Jsp"><figure class="iseeu highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;user != null&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;p&gt;Welcome, $&#123;user.name&#125;!&lt;/p&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;item&quot;</span> items=<span class="string">&quot;$&#123;itemList&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;p&gt;$&#123;item&#125;&lt;/p&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure></div>

<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1>
		</div>

		
		<div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
			<div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> Java Web 开发基础</li>
        <li><strong>Author:</strong> sky123</li>
        <li><strong>Created at
                :</strong> 2024-11-11 23:54:46</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2025-03-10 22:07:04
            </li>
        
        <li>
            <strong>Link:</strong> https://skyi23.github.io/2024/11/11/Java Web 开发基础/
        </li>
        <li>
            <strong>
                License:
            </strong>
            

            
                This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a>.
            
        </li>
    </ul>
</div>

		</div>
		

		
		<ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
			
			<li class="tag-item mx-0.5">
				<a href="/tags/java-web/">#java web</a>&nbsp;
			</li>
			
		</ul>
		

		

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			<div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="prev" rel="prev" href="/2024/11/12/CVE-2024-1086/">
					<span class="left arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-left"></i>
					</span>
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item truncate max-w-48">CVE-2024-1086 分析</span>
						<span class="post-nav-item">Prev posts</span>
					</span>
				</a>
			</div>
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/2024/11/11/Java%20%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item truncate max-w-48">Java 安全基础</span>
						<span class="post-nav-item">Next posts</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
		<div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
			<div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        Comments
    </div>
    

        
            
    <div id="giscus-container"></div>
    <script data-swup-reload-script defer>
        async function loadGiscus() {
            const giscusConfig = {
                'src': 'https://giscus.app/client.js',
                'data-repo': 'skyI23/my-giscus-discussions',
                'data-repo-id': 'R_kgDONL9k_w',
                'data-category': 'Announcements',
                'data-category-id': 'DIC_kwDONL9k_84CkEdK',
                'data-mapping': 'pathname',
                'data-strict': '0',
                'data-reactions-enabled': '1',
                'data-emit-metadata': '1',
                'data-theme': 'preferred_color_scheme',
                'data-lang': 'zh-CN',
                'data-input-position': 'bottom',
                'data-loading': 'lazy',
                'crossorigin': 'anonymous',
                'async': true
            }
            const giscusScript = document.createElement('script');
            for (const key in giscusConfig) {
                giscusScript.setAttribute(key, giscusConfig[key]);
            }
            document.getElementById('giscus-container').appendChild(giscusScript);
        }
        if ('true') {
            let loadGiscusTimeout = setTimeout(() => {
                loadGiscus();
                clearTimeout(loadGiscusTimeout);
            }, 1000);
        } else {
            document.addEventListener('DOMContentLoaded', loadGiscus);
        }
    </script>


        
        
    
</div>

		</div>
		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">On this page</div>
		<div class="page-title">Java Web 开发基础</div>
		<ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Java-Web-%E6%80%BB%E8%A7%88"><span class="nav-text">Java Web 总览</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Java-Web-%E7%BB%84%E6%88%90"><span class="nav-text">Java Web 组成</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Web-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">Web 服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3"><span class="nav-text">前端相关</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTML-CSS-JavaScript"><span class="nav-text">HTML&#x2F;CSS&#x2F;JavaScript</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSP%EF%BC%88JavaServer-Pages%EF%BC%89"><span class="nav-text">JSP（JavaServer Pages）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E7%9B%B8%E5%85%B3"><span class="nav-text">后端相关</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Servlet"><span class="nav-text">Servlet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Filter%EF%BC%88%E8%BF%87%E6%BB%A4%E5%99%A8%EF%BC%89"><span class="nav-text">Filter（过滤器）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Listener%EF%BC%88%E7%9B%91%E5%90%AC%E5%99%A8%EF%BC%89"><span class="nav-text">Listener（监听器）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">数据库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MVC-%E6%A8%A1%E5%BC%8F%E5%92%8C%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="nav-text">MVC 模式和三层架构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MVC-%E6%A8%A1%E5%BC%8F"><span class="nav-text">MVC 模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="nav-text">三层架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MVC-%E5%92%8C-%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="nav-text">MVC 和 三层架构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="nav-text">域对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#PageContext%EF%BC%88%E9%A1%B5%E9%9D%A2%E8%8C%83%E5%9B%B4%EF%BC%89"><span class="nav-text">PageContext（页面范围）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpServletRequest%EF%BC%88%E8%AF%B7%E6%B1%82%E8%8C%83%E5%9B%B4%EF%BC%89"><span class="nav-text">HttpServletRequest（请求范围）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpSession%EF%BC%88%E4%BC%9A%E8%AF%9D%E8%8C%83%E5%9B%B4%EF%BC%89"><span class="nav-text">HttpSession（会话范围）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ServletContext%EF%BC%88%E5%BA%94%E7%94%A8%E8%8C%83%E5%9B%B4%EF%BC%89"><span class="nav-text">ServletContext（应用范围）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Maven-Web-%E9%A1%B9%E7%9B%AE"><span class="nav-text">Maven Web 项目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven-Web-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-text">Maven Web 项目结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven-Web-%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-text">Maven Web 开发项目结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E5%90%8E%E7%9A%84-Web-%E5%BA%94%E7%94%A8%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-text">构建后的 Web 应用目录结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pom-xml"><span class="nav-text">pom.xml</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="nav-text">基本结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dependencies"><span class="nav-text">dependencies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#build"><span class="nav-text">build</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#properties"><span class="nav-text">properties</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IDEA%E4%B8%AD%E5%88%9B%E5%BB%BA-Maven-Web-%E9%A1%B9%E7%9B%AE"><span class="nav-text">IDEA中创建 Maven Web 项目</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF"><span class="nav-text">使用项目模板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF"><span class="nav-text">不使用项目模板</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Java-Web-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">Java Web 服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Apache-Tomcat"><span class="nav-text">Apache Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE"><span class="nav-text">安装和配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA-%E4%B8%AD%E4%BD%BF%E7%94%A8-Tomcat"><span class="nav-text">IDEA 中使用 Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%AE%89%E8%A3%85%E7%9A%84-Tomcat"><span class="nav-text">使用安装的 Tomcat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Maven-Tomcat-%E6%8F%92%E4%BB%B6"><span class="nav-text">使用 Maven Tomcat 插件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9B%AE%E5%BD%95%E5%8F%8A%E6%96%87%E4%BB%B6"><span class="nav-text">常见目录及文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Jetty"><span class="nav-text">Jetty</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E7%82%B9"><span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE-1"><span class="nav-text">安装和配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Java-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3"><span class="nav-text">Java 数据库相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC"><span class="nav-text">JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JDBC-%E6%93%8D%E4%BD%9C%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4"><span class="nav-text">JDBC 操作的基本步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD%E9%A9%B1%E5%8A%A8"><span class="nav-text">加载驱动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5"><span class="nav-text">建立连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Statement-%E5%AF%B9%E8%B1%A1"><span class="nav-text">创建 Statement 对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E6%9F%A5%E8%AF%A2%E6%88%96%E6%9B%B4%E6%96%B0"><span class="nav-text">执行查询或更新</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E8%B5%84%E6%BA%90"><span class="nav-text">关闭资源</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JDBC-%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7"><span class="nav-text">JDBC 高级特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="nav-text">事务管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E5%92%8C%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-text">数据源和连接池</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis"><span class="nav-text">MyBatis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis-%E7%9A%84%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="nav-text">MyBatis 的核心组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">核心配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="nav-text">数据库映射文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java-%E6%8E%A5%E5%8F%A3%EF%BC%88Mapper-%E6%8E%A5%E5%8F%A3%EF%BC%89"><span class="nav-text">Java 接口（Mapper 接口）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java-%E5%AE%9E%E4%BD%93%E7%B1%BB%EF%BC%88POJO%EF%BC%89"><span class="nav-text">Java 实体类（POJO）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-text">MyBatis 的工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8E-POJO-%E5%B1%9E%E6%80%A7%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="nav-text">数据库字段名与 POJO 属性名不一致</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-SQL-%E5%88%AB%E5%90%8D%E6%9D%A5%E8%A7%A3%E5%86%B3"><span class="nav-text">通过 SQL 别名来解决</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-resultMap-%E8%BF%9B%E8%A1%8C%E5%AD%97%E6%AE%B5%E6%98%A0%E5%B0%84"><span class="nav-text">使用 resultMap 进行字段映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Results-%E5%92%8C-Result-%E6%B3%A8%E8%A7%A3"><span class="nav-text">使用 @Results 和 @Result 注解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E7%94%A8%E9%A9%BC%E5%B3%B0%E5%91%BD%E5%90%8D%E8%BD%AC%E6%8D%A2"><span class="nav-text">启用驼峰命名转换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis-%E7%9A%84%E5%8A%A8%E6%80%81-SQL"><span class="nav-text">MyBatis 的动态 SQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E3%80%81-%E6%A0%87%E7%AD%BE"><span class="nav-text">&lt;if&gt;、&lt;where&gt; 标签</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E3%80%81%E3%80%81-%E6%A0%87%E7%AD%BE"><span class="nav-text">&lt;choose&gt;、&lt;when&gt;、&lt;otherwise&gt; 标签</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE"><span class="nav-text">&lt;set&gt; 标签</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE-1"><span class="nav-text">&lt;foreach&gt; 标签</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE-2"><span class="nav-text">&lt;trim&gt; 标签</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Servlet-1"><span class="nav-text">Servlet</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet-%E5%88%9B%E5%BB%BA"><span class="nav-text">Servlet 创建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-pom-xml"><span class="nav-text">配置 pom.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E5%86%99-Servlet-%E4%BB%A3%E7%A0%81"><span class="nav-text">编写 Servlet 代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE-Servlet"><span class="nav-text">访问 Servlet</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">Servlet 基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Servlet-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">Servlet 生命周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Servlet-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-text">Servlet 体系结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet-%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE"><span class="nav-text">Servlet 路径配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="nav-text">配置方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#WebServlet-%E6%B3%A8%E8%A7%A3"><span class="nav-text">@WebServlet 注解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#web-xml-%E9%85%8D%E7%BD%AE"><span class="nav-text">web.xml 配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%B9%E9%85%8D%E6%96%B9%E5%BC%8F"><span class="nav-text">匹配方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B2%BE%E7%A1%AE%E5%8C%B9%E9%85%8D"><span class="nav-text">精确匹配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84%E5%8C%B9%E9%85%8D%EF%BC%88%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D%EF%BC%89"><span class="nav-text">路径匹配（前缀匹配）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E5%90%8D%E5%8C%B9%E9%85%8D%EF%BC%88%E5%90%8E%E7%BC%80%E5%8C%B9%E9%85%8D%EF%BC%89"><span class="nav-text">扩展名匹配（后缀匹配）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E5%8C%B9%E9%85%8D"><span class="nav-text">默认匹配</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet-%E4%B8%AD%E7%9A%84%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="nav-text">Servlet 中的域对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#PageContext%EF%BC%88%E9%A1%B5%E9%9D%A2%E8%8C%83%E5%9B%B4%EF%BC%89-1"><span class="nav-text">PageContext（页面范围）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpServletRequest%EF%BC%88%E8%AF%B7%E6%B1%82%E8%8C%83%E5%9B%B4%EF%BC%89-1"><span class="nav-text">HttpServletRequest（请求范围）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpSession%EF%BC%88%E4%BC%9A%E8%AF%9D%E8%8C%83%E5%9B%B4%EF%BC%89-1"><span class="nav-text">HttpSession（会话范围）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ServletContext%EF%BC%88%E5%BA%94%E7%94%A8%E8%8C%83%E5%9B%B4%EF%BC%89-1"><span class="nav-text">ServletContext（应用范围）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94%E5%AF%B9%E8%B1%A1"><span class="nav-text">请求响应对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#request-%E5%AF%B9%E8%B1%A1"><span class="nav-text">request 对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E8%A1%8C%E4%BF%A1%E6%81%AF"><span class="nav-text">获取请求行信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%BF%A1%E6%81%AF"><span class="nav-text">获取请求头信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-text">获取请求参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reponse-%E5%AF%B9%E8%B1%A1"><span class="nav-text">reponse 对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"><span class="nav-text">相关方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-text">重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="nav-text">请求转发</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA%E6%8A%80%E6%9C%AF"><span class="nav-text">会话跟踪技术</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA%E6%8A%80%E6%9C%AF%E6%A6%82%E8%BF%B0"><span class="nav-text">会话跟踪技术概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D"><span class="nav-text">会话</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA"><span class="nav-text">会话跟踪</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie"><span class="nav-text">Cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">Cookie 的基本使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie-%E7%9A%84%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="nav-text">Cookie 的原理分析</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Session"><span class="nav-text">Session</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Session-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">Session 的基本使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Session-%E7%9A%84%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="nav-text">Session 的原理分析</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Filter"><span class="nav-text">Filter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Filter-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">Filter 生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-Filter"><span class="nav-text">配置 Filter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Filter-%E7%9A%84%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-text">Filter 的常见应用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95"><span class="nav-text">日志记录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83"><span class="nav-text">用户认证与授权</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E7%9A%84%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E8%AE%BE%E7%BD%AE"><span class="nav-text">请求和响应的字符编码设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%8E%8B%E7%BC%A9"><span class="nav-text">响应压缩</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Filter-Chain%EF%BC%88%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE%EF%BC%89"><span class="nav-text">Filter Chain（过滤器链）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Listener"><span class="nav-text">Listener</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Listener-%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="nav-text">Listener 的类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Listener-%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="nav-text">Listener 的配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE"><span class="nav-text">使用注解配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-web-xml-%E4%B8%AD%E9%85%8D%E7%BD%AE"><span class="nav-text">在 web.xml 中配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Listener%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-text">Listener的使用场景</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP"><span class="nav-text">JSP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-%E5%8E%9F%E7%90%86"><span class="nav-text">JSP 原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-text">JSP 基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E8%84%9A%E6%9C%AC%E5%85%83%E7%B4%A0"><span class="nav-text">JSP 脚本元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-%E6%8C%87%E4%BB%A4"><span class="nav-text">JSP 指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="nav-text">EL 表达式和域对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSTL-%E6%A0%87%E7%AD%BE"><span class="nav-text">JSTL 标签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring"><span class="nav-text">Spring</span></a></li></ol>

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2024</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">sky123</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        40 posts in total
                    </span>
                    
                        <span>
                            671.1k words in total
                        </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://cn.vercount.one/js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">VISITOR COUNT</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">TOTAL PAGE VIEWS</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a></span>
            <span class="text-sm lg:block">THEME&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.5</a></span>
        </div>
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
		<li class="go-comment">
			<i class="fa-regular fa-comments"></i>
		</li>
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="arrow-up fas fa-arrow-up"></i>
			<span class="percent"></span>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	
	<div class="search-pop-overlay">
	<div class="popup search-popup">
		<div class="search-header">
			<span class="search-input-field-pre">
				<i class="fa-solid fa-keyboard"></i>
			</span>
			<div class="search-input-container">
				<input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Search..." spellcheck="false" type="search" class="search-input">
			</div>
			<span class="popup-btn-close">
				<i class="fa-solid fa-times"></i>
			</span>
		</div>
		<div id="search-result">
			<div id="no-result">
				<i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
			</div>
		</div>
	</div>
</div>
	

</main>



<script src="/js/build/libs/Swup.min.js"></script>

<script src="/js/build/libs/SwupSlideTheme.min.js"></script>

<script src="/js/build/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/build/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/build/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/build/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	
<script src="/js/build/tools/imageViewer.js" type="module"></script>

<script src="/js/build/utils.js" type="module"></script>

<script src="/js/build/main.js" type="module"></script>

<script src="/js/build/layouts/navbarShrink.js" type="module"></script>

<script src="/js/build/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/build/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/build/layouts/categoryList.js" type="module"></script>



    
<script src="/js/build/tools/localSearch.js" type="module"></script>




    
<script src="/js/build/tools/codeBlock.js" type="module"></script>




    
<script src="/js/build/layouts/lazyload.js" type="module"></script>




    
<script src="/js/build/tools/runtime.js"></script>

    
<script src="/js/build/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/build/libs/Typed.min.js"></script>

  
<script src="/js/build/plugins/typed.js" type="module"></script>




    
        
<script src="/js/build/libs/mermaid.min.js"></script>

    
    
<script src="/js/build/plugins/mermaid.js"></script>






    
<script src="/js/build/libs/anime.min.js"></script>





    
<script src="/js/build/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/build/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/build/layouts/essays.js" type="module" data-swup-reload-script=""></script>





    
<script src="/js/build/layouts/bookmarkNav.js" type="module"></script>


	
</body>

</html>